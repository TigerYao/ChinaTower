{"version":3,"file":"index.js","sources":["../src/logger.js","../src/ua.js","../src/isMSESupported.js","../src/isHlsNativeSupported.js","../src/math.js","../src/sequence.js"],"sourcesContent":["const logger = {\n  DEBUG: 'debug',\n  INFO: 'info',\n  WARN: 'warn',\n  ERROR: 'error',\n\n  log(level, message, ...params) {\n    /* eslint-disable no-console */\n    const method = console[level] ? level : 'log'\n    console[method]('[griffith] ' + message, ...params)\n    /* eslint-enable no-console */\n  },\n\n  debug(...args) {\n    this.log(this.DEBUG, ...args)\n  },\n\n  info(...args) {\n    this.log(this.INFO, ...args)\n  },\n\n  warn(...args) {\n    this.log(this.WARN, ...args)\n  },\n\n  error(...args) {\n    this.log(this.ERROR, ...args)\n  },\n}\n\nexport default logger\n","export const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent)\n\nexport const isAndroid = /(android)/i.test(navigator.userAgent)\n\nexport const isSafari = /^((?!chrome|android).)*safari/i.test(\n  navigator.userAgent\n)\n\nexport default {\n  isMobile,\n  isAndroid,\n  isSafari,\n}\n","/**\n * Copied from https://github.com/video-dev/hls.js/blob/master/src/is-supported.js\n */\nfunction getMediaSource() {\n  if (typeof window !== 'undefined') {\n    return window.MediaSource || window.WebKitMediaSource\n  }\n}\n\nexport default function isMSESupported() {\n  const mediaSource = getMediaSource()\n  const sourceBuffer = window.SourceBuffer || window.WebKitSourceBuffer\n  const isTypeSupported =\n    mediaSource &&\n    typeof mediaSource.isTypeSupported === 'function' &&\n    mediaSource.isTypeSupported('video/mp4; codecs=\"avc1.42E01E,mp4a.40.2\"')\n\n  const sourceBufferValidAPI =\n    !sourceBuffer ||\n    (sourceBuffer.prototype &&\n      typeof sourceBuffer.prototype.appendBuffer === 'function' &&\n      typeof sourceBuffer.prototype.remove === 'function')\n  return !!isTypeSupported && !!sourceBufferValidAPI\n}\n","export default function isHlsNativeSupported() {\n  const video = document.createElement('video')\n  return Boolean(video.canPlayType('application/vnd.apple.mpegURL'))\n}\n","/**\n * 获得最大公约数\n * @param {number} a\n * @param {number} b\n */\nexport function getGCD(a, b) {\n  if (!Number.isInteger(a) || !Number.isInteger(b)) {\n    throw new Error('params must be interger number')\n  }\n  if (a === 0) {\n    return Math.abs(b)\n  }\n  if (b === 0) {\n    return Math.abs(a)\n  }\n  return getGCD(b, a % b)\n}\n\n/**\n * 约分\n * @param {number} a\n * @param {number} b\n */\nexport function reduce(a, b) {\n  if (a === 0 || b === 0) {\n    throw new Error('params must not be zero')\n  }\n  const gcd = getGCD(a, b)\n  return [a / gcd, b / gcd]\n}\n","export default function sequence(...fns) {\n  return (...args) => fns.reduce((_, fn) => fn(...args), null)\n}\n"],"names":["logger","DEBUG","INFO","WARN","ERROR","log","level","message","params","method","console","debug","args","info","warn","error","isMobile","test","navigator","userAgent","isAndroid","isSafari","getMediaSource","window","MediaSource","WebKitMediaSource","isMSESupported","mediaSource","sourceBuffer","SourceBuffer","WebKitSourceBuffer","isTypeSupported","sourceBufferValidAPI","prototype","appendBuffer","remove","isHlsNativeSupported","video","document","createElement","Boolean","canPlayType","getGCD","a","b","Number","isInteger","Error","Math","abs","reduce","gcd","sequence","fns","_","fn"],"mappings":"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"}