{"version":3,"file":"index.js","sources":["../src/fetch.js","../src/mp4/stream.js","../src/mp4/boxes/ftyp.js","../src/mp4/boxes/mvhd.js","../src/mp4/boxes/tkhd.js","../src/mp4/boxes/elst.js","../src/mp4/boxes/mdhd.js","../src/mp4/boxes/hdlr.js","../src/mp4/boxes/vmhd.js","../src/mp4/boxes/dref.js","../src/mp4/boxes/url.js","../src/mp4/boxes/stsd.js","../src/mp4/boxes/avc1.js","../src/mp4/boxes/avcC.js","../src/mp4/boxes/stts.js","../src/mp4/boxes/stss.js","../src/mp4/boxes/ctts.js","../src/mp4/boxes/stsc.js","../src/mp4/boxes/stsz.js","../src/mp4/boxes/stco.js","../src/mp4/boxes/smhd.js","../src/mp4/boxes/mp4a.js","../src/mp4/boxes/esds.js","../src/mp4/boxes/meta.js","../src/mp4/boxes/mdat.js","../src/mp4/boxes/sdtp.js","../src/mp4/boxes/thmb.js","../src/mp4/boxes/index.js","../src/mp4/mp4Box.js","../src/mp4/mp4Parse.js","../src/mp4/utils/findBox.js","../src/mp4/utils/getSamplesOffset.js","../src/mp4/utils/getPerChunkArray.js","../src/mp4/utils/getFragmentPosition.js","../src/mp4/utils/getBufferStart.js","../src/mp4/utils/getSamples.js","../src/mp4/utils/getDuration.js","../src/mp4/utils/getSamplesInterval.js","../src/mp4/utils/getTrackInfo.js","../src/mp4/mp4Probe.js","../src/fmp4/utils/generateVersionAndFlags.js","../src/fmp4/utils/concatTypedArray.js","../src/fmp4/utils/num2Bytes.js","../src/fmp4/utils/str2TypedArray.js","../src/fmp4/utils/generateBox.js","../src/fmp4/utils/generateBytes.js","../src/fmp4/boxes/ftyp.js","../src/fmp4/utils/constants.js","../src/fmp4/boxes/mvhd.js","../src/fmp4/boxes/tkhd.js","../src/fmp4/boxes/mdhd.js","../src/fmp4/boxes/hdlr.js","../src/fmp4/boxes/vmhd.js","../src/fmp4/boxes/smhd.js","../src/fmp4/boxes/dinf.js","../src/fmp4/boxes/avcC.js","../src/fmp4/boxes/avc1.js","../src/fmp4/boxes/esds.js","../src/fmp4/boxes/mp4a.js","../src/fmp4/boxes/stsd.js","../src/fmp4/boxes/stbl.js","../src/fmp4/boxes/minf.js","../src/fmp4/boxes/mdia.js","../src/fmp4/boxes/trak.js","../src/fmp4/boxes/mvex.js","../src/fmp4/boxes/moov.js","../src/fmp4/boxes/mfhd.js","../src/fmp4/boxes/tfhd.js","../src/fmp4/boxes/sdtp.js","../src/fmp4/boxes/tfdt.js","../src/fmp4/boxes/trun.js","../src/fmp4/boxes/traf.js","../src/fmp4/boxes/moof.js","../src/fmp4/boxes/mdat.js","../src/fmp4/fmp4Generator.js","../src/mse/polyfill.js","../src/mse/controller.js","../src/player.js","../src/index.js"],"sourcesContent":["export default class FragmentFetch {\n  static queue = []\n\n  constructor(url, start, end, callback) {\n    this.start = start\n    FragmentFetch.queue.push(this)\n\n    const xhr = new XMLHttpRequest()\n    this.xhr = xhr\n    xhr.open('get', url)\n    xhr.responseType = 'arraybuffer'\n    xhr.setRequestHeader('Range', `bytes=${start}-${end}`)\n    xhr.onload = () => {\n      if (xhr.status === 200 || xhr.status === 206) {\n        callback(xhr.response)\n      }\n      this.remove()\n    }\n    xhr.send()\n\n    xhr.onerror = () => {\n      this.remove()\n    }\n    xhr.onabort = () => {\n      this.remove()\n    }\n  }\n\n  remove = () => {\n    FragmentFetch.queue = FragmentFetch.queue.filter(\n      item => item.start !== this.start\n    )\n  }\n\n  static clear() {\n    while (FragmentFetch.queue.length) {\n      const item = FragmentFetch.queue.shift()\n      item.xhr.abort()\n    }\n  }\n}\n","export default class Stream {\n  constructor(buffer) {\n    this.buffer = buffer\n    this.position = 0\n  }\n\n  readType(length = 4) {\n    const typeBuffer = []\n    for (let i = 0; i < length; i++) {\n      typeBuffer.push(this.buffer[this.position++])\n    }\n    return String.fromCharCode.apply(null, typeBuffer)\n  }\n\n  readByte(length) {\n    switch (length) {\n      case 1:\n        return this.readOneByte()\n      case 2:\n        return this.readTwoByte()\n      case 3:\n        return this.readThreeByte()\n      case 4:\n        return this.readFourByte()\n      default:\n        return 0\n    }\n  }\n\n  readOneByte() {\n    return this.buffer[this.position++] >>> 0\n  }\n\n  readTwoByte() {\n    return (\n      ((this.buffer[this.position++] << 8) | this.buffer[this.position++]) >>> 0\n    )\n  }\n\n  readThreeByte() {\n    return (\n      ((this.buffer[this.position++] << 16) |\n        (this.buffer[this.position++] << 8) |\n        this.buffer[this.position++]) >>>\n      0\n    )\n  }\n\n  readFourByte() {\n    return (\n      ((this.buffer[this.position++] << 24) |\n        (this.buffer[this.position++] << 16) |\n        (this.buffer[this.position++] << 8) |\n        this.buffer[this.position++]) >>>\n      0\n    )\n  }\n}\n","import Stream from '../stream'\n\nexport default function ftyp(buffer) {\n  const stream = new Stream(buffer)\n  const majorBrand = stream.readType()\n  const minorVersion = stream.readByte(4)\n  const compatibleBrands = []\n\n  for (let i = stream.position; i < buffer.length; i += 4) {\n    compatibleBrands.push(stream.readType(4))\n  }\n\n  const ftypBox = {\n    majorBrand,\n    minorVersion,\n    compatibleBrands,\n  }\n\n  return ftypBox\n}\n","import Stream from '../stream'\n\nexport default function mvhd(buffer) {\n  const stream = new Stream(buffer)\n\n  const version = stream.readByte(1)\n  const flags = stream.readByte(3)\n  const creationTime = stream.readByte(4)\n  const modificationTime = stream.readByte(4)\n  const timescale = stream.readByte(4)\n  const duration = stream.readByte(4)\n  const rate = stream.readByte(4)\n  const volume = stream.readByte(1)\n\n  // reserved\n  stream.readByte(3)\n  stream.readByte(4)\n  stream.readByte(4)\n\n  const matrix = []\n  for (let i = 0; i < 36; i += 4) {\n    matrix.push(stream.readByte(4))\n  }\n\n  // preDefined\n  for (let i = 0; i < 24; i += 4) {\n    stream.readByte(4)\n  }\n\n  const nextTrackID = stream.readByte(4)\n\n  const mvhdBox = {\n    version,\n    flags,\n    creationTime,\n    modificationTime,\n    timescale,\n    duration,\n    rate,\n    volume,\n    matrix,\n    nextTrackID,\n  }\n\n  return mvhdBox\n}\n","import Stream from '../stream'\n\nexport default function tkhd(buffer) {\n  const stream = new Stream(buffer)\n\n  const version = stream.readByte(1)\n  const flags = stream.readByte(3)\n  const creationTime = stream.readByte(4)\n  const modificationTime = stream.readByte(4)\n  const trackID = stream.readByte(4)\n  // reserved\n  stream.readByte(4)\n  const duration = stream.readByte(4)\n  // reserved\n  stream.readByte(4)\n  stream.readByte(4)\n  const layer = stream.readByte(2)\n  const alternateGroup = stream.readByte(2)\n  const volume = stream.readByte(2)\n  // reserved\n  stream.readByte(2)\n\n  const matrix = []\n  for (let i = 0; i < 36; i += 4) {\n    matrix.push(stream.readByte(4))\n  }\n  const width = Number(`${stream.readByte(2)}.${stream.readByte(2)}`)\n  const height = Number(`${stream.readByte(2)}.${stream.readByte(2)}`)\n  const tkhdBox = {\n    version,\n    flags,\n    creationTime,\n    modificationTime,\n    trackID,\n    duration,\n    layer,\n    alternateGroup,\n    volume,\n    matrix,\n    width,\n    height,\n  }\n\n  return tkhdBox\n}\n","import Stream from '../stream'\n\nexport default function elst(buffer) {\n  const stream = new Stream(buffer)\n\n  const version = stream.readByte(1)\n  const flags = stream.readByte(3)\n  const entryCount = stream.readByte(4)\n  const entries = []\n\n  for (let i = 0; i < entryCount; ++i) {\n    const segmentDuration = stream.readByte(4)\n    let mediaTime = stream.readByte(4)\n\n    // 0xffffffff -> -1\n    if (mediaTime === 4294967295) {\n      mediaTime = -1\n    }\n    const mediaRateInteger = stream.readByte(2)\n    const mediaRateFraction = stream.readByte(2)\n\n    entries.push({\n      segmentDuration,\n      mediaTime,\n      mediaRateInteger,\n      mediaRateFraction,\n    })\n  }\n\n  const elstBox = {\n    version,\n    flags,\n    entries,\n  }\n\n  return elstBox\n}\n","import Stream from '../stream'\n\nexport default function mdhd(buffer) {\n  const stream = new Stream(buffer)\n\n  const version = stream.readByte(1)\n  const flags = stream.readByte(3)\n  const creationTime = stream.readByte(4)\n  const modificationTime = stream.readByte(4)\n  const timescale = stream.readByte(4)\n  const duration = stream.readByte(4)\n  const language = stream.readByte(2)\n\n  const field = []\n  field[0] = (language >> 10) & 0x1f\n  field[1] = (language >> 5) & 0x1f\n  field[2] = language & 0x1f\n  const languageString = String.fromCharCode(\n    0x60 + field[0],\n    0x60 + field[1],\n    0x60 + field[2]\n  )\n\n  // preDefined\n  stream.readByte(2)\n  const mdhdBox = {\n    version,\n    flags,\n    creationTime,\n    modificationTime,\n    timescale,\n    duration,\n    languageString,\n  }\n\n  return mdhdBox\n}\n","import Stream from '../stream'\n\nexport default function hdlr(buffer) {\n  const stream = new Stream(buffer)\n\n  const version = stream.readByte(1)\n  const flags = stream.readByte(3)\n\n  // preDefined\n  stream.readByte(4)\n  const handlerType = stream.readType().toString()\n\n  const handlerType2 = stream.readType().toString()\n\n  // reserved\n  stream.readByte(4)\n  stream.readByte(4)\n  const name = []\n  let c\n  while ((c = stream.readByte(1)) !== 0x00) {\n    name.push(String.fromCharCode(c))\n  }\n\n  const hdlrBox = {\n    version,\n    flags,\n    handlerType,\n    handlerType2: handlerType2 || 0,\n    name: name.join(''),\n  }\n\n  return hdlrBox\n}\n","import Stream from '../stream'\n\nexport default function vmhd(buffer) {\n  const stream = new Stream(buffer)\n\n  const version = stream.readByte(1)\n  const flags = stream.readByte(3)\n  const graphicsmode = stream.readByte(2)\n  const opcolor = new Array(3).fill(stream.readByte(2))\n\n  const vmhdBox = {\n    version,\n    flags,\n    graphicsmode,\n    opcolor,\n  }\n\n  return vmhdBox\n}\n","import Stream from '../stream'\nimport Box from '../mp4Box'\n\nexport default function dref(buffer) {\n  const stream = new Stream(buffer)\n\n  const version = stream.readByte(1)\n  const flags = stream.readByte(3)\n\n  const entryCount = stream.readByte(4)\n\n  const urlBox = []\n  const urlBuffer = stream.buffer.slice(8)\n  const newStream = new Stream(urlBuffer)\n  const MP4Box = new Box()\n\n  for (let i = 0; i < entryCount; i++) {\n    MP4Box.readSize(newStream)\n    MP4Box.readType(newStream)\n    MP4Box.readBody(newStream)\n    urlBox.push(MP4Box.box)\n  }\n\n  const drefBox = {\n    version,\n    flags,\n    url: urlBox,\n  }\n\n  return drefBox\n}\n","import Stream from '../stream'\n\nexport default function url(buffer) {\n  const stream = new Stream(buffer)\n\n  const version = stream.readByte(1)\n  const flags = stream.readByte(3)\n\n  const urlBox = {\n    version,\n    flags,\n  }\n\n  return urlBox\n}\n","import Stream from '../stream'\nimport Box from '../mp4Box'\n\nexport default function stsd(buffer) {\n  const stream = new Stream(buffer)\n\n  const version = stream.readByte(1)\n  const flags = stream.readByte(3)\n\n  const entryCount = stream.readByte(4)\n\n  const box = []\n  const avc1Buffer = stream.buffer.slice(8)\n  const newStream = new Stream(avc1Buffer)\n  const MP4Box = new Box()\n  let type = 'avc1'\n\n  for (let i = 0; i < entryCount; i++) {\n    MP4Box.readSize(newStream)\n    MP4Box.readType(newStream)\n    MP4Box.readBody(newStream)\n    box.push(MP4Box.box)\n    type = MP4Box.type\n  }\n\n  const stsdBox = {\n    version,\n    flags,\n    [type]: box,\n  }\n\n  return stsdBox\n}\n","import Stream from '../stream'\nimport Box from '../mp4Box'\n\nexport default function avc1(buffer) {\n  const stream = new Stream(buffer)\n\n  // reserved\n  stream.readByte(4)\n  stream.readByte(2)\n  const dataReferenceIndex = stream.readByte(2)\n  // preDefined\n  stream.readByte(2)\n  // reserved\n  stream.readByte(2)\n  // preDefined\n  stream.readByte(4)\n  stream.readByte(4)\n  stream.readByte(4)\n  const width = stream.readByte(2)\n  const height = stream.readByte(2)\n  const horizresolution = stream.readByte(4)\n  const vertresolution = stream.readByte(4)\n  // reserved\n  stream.readByte(4)\n  const frameCount = stream.readByte(2)\n  const compressorname = stream.readType(32)\n  const depth = stream.readByte(2)\n  // preDefined\n  stream.readByte(2)\n\n  const avcCBuffer = stream.buffer.slice(78)\n  const newStream = new Stream(avcCBuffer)\n  const MP4Box = new Box()\n\n  MP4Box.readSize(newStream)\n  MP4Box.readType(newStream)\n  MP4Box.readBody(newStream)\n  const avcCBox = MP4Box.box\n\n  const avc1Box = {\n    dataReferenceIndex,\n    width,\n    height,\n    horizresolution,\n    vertresolution,\n    frameCount,\n    compressorname,\n    depth,\n    avcC: avcCBox,\n  }\n\n  return avc1Box\n}\n","import Stream from '../stream'\n\nexport default function avcC(buffer) {\n  const stream = new Stream(buffer)\n\n  const configurationVersion = stream.readByte(1)\n  const AVCProfileIndication = stream.readByte(1)\n  const profileCompatibility = stream.readByte(1)\n  const AVCLevelIndication = stream.readByte(1)\n  const lengthSizeMinusOne = stream.readByte(1) & 0x3\n\n  const numOfSequenceParameterSets = stream.readByte(1) & 31\n  const SPS = []\n  for (let i = 0; i < numOfSequenceParameterSets; i++) {\n    const length = stream.readByte(2)\n    SPS.push(...stream.buffer.slice(stream.position, stream.position + length))\n    stream.position += length\n  }\n\n  const numOfPictureParameterSets = stream.readByte(1)\n  const PPS = []\n  for (let i = 0; i < numOfPictureParameterSets; i++) {\n    const length = stream.readByte(2)\n    PPS.push(...stream.buffer.slice(stream.position, stream.position + length))\n    stream.position += length\n  }\n\n  const avcCBox = {\n    configurationVersion,\n    AVCProfileIndication,\n    profileCompatibility,\n    AVCLevelIndication,\n    lengthSizeMinusOne,\n    SPS,\n    PPS,\n  }\n\n  return avcCBox\n}\n","import Stream from '../stream'\n\nexport default function stts(buffer) {\n  const stream = new Stream(buffer)\n\n  const version = stream.readByte(1)\n  const flags = stream.readByte(3)\n\n  const entryCount = stream.readByte(4)\n  const samples = []\n\n  for (let i = 0; i < entryCount; i++) {\n    const sampleCount = stream.readByte(4)\n    const sampleDelta = stream.readByte(4)\n    samples.push({\n      sampleCount,\n      sampleDelta,\n    })\n  }\n\n  const sttsBox = {\n    version,\n    flags,\n    samples,\n  }\n\n  return sttsBox\n}\n","import Stream from '../stream'\n\nexport default function stss(buffer) {\n  const stream = new Stream(buffer)\n\n  const version = stream.readByte(1)\n  const flags = stream.readByte(3)\n\n  const entryCount = stream.readByte(4)\n  const samples = []\n\n  for (let i = 0; i < entryCount; i++) {\n    samples.push({sampleNumber: stream.readByte(4)})\n  }\n\n  const stssBox = {\n    version,\n    flags,\n    samples,\n  }\n\n  return stssBox\n}\n","import Stream from '../stream'\n\nexport default function ctts(buffer) {\n  const stream = new Stream(buffer)\n\n  const version = stream.readByte(1)\n  const flags = stream.readByte(3)\n\n  const entryCount = stream.readByte(4)\n  const samples = []\n\n  for (let i = 0; i < entryCount; i++) {\n    samples.push({\n      sampleCount: stream.readByte(4),\n      sampleOffset: stream.readByte(4),\n    })\n  }\n\n  const cttsBox = {\n    version,\n    flags,\n    samples,\n  }\n\n  return cttsBox\n}\n","import Stream from '../stream'\n\nexport default function mdhd(buffer) {\n  const stream = new Stream(buffer)\n\n  const version = stream.readByte(1)\n  const flags = stream.readByte(3)\n\n  const entryCount = stream.readByte(4)\n  const samples = []\n\n  for (let i = 0; i < entryCount; i++) {\n    samples.push({\n      firstChunk: stream.readByte(4),\n      samplesPerChunk: stream.readByte(4),\n      sampleDescriptionIndex: stream.readByte(4),\n    })\n  }\n\n  const mdhdBox = {\n    version,\n    flags,\n    samples,\n  }\n\n  return mdhdBox\n}\n","import Stream from '../stream'\n\nexport default function stss(buffer) {\n  const stream = new Stream(buffer)\n\n  const version = stream.readByte(1)\n  const flags = stream.readByte(3)\n\n  const sampleSize = stream.readByte(4)\n  const sampleCount = stream.readByte(4)\n  const samples = []\n\n  for (let i = 0; i < sampleCount; i++) {\n    samples.push({entrySize: stream.readByte(4)})\n  }\n\n  const stssBox = {\n    version,\n    flags,\n    sampleSize,\n    samples,\n  }\n\n  return stssBox\n}\n","import Stream from '../stream'\n\nexport default function stco(buffer) {\n  const stream = new Stream(buffer)\n\n  const version = stream.readByte(1)\n  const flags = stream.readByte(3)\n\n  const entryCount = stream.readByte(4)\n  const samples = []\n\n  for (let i = 0; i < entryCount; i++) {\n    samples.push({chunkOffset: stream.readByte(4)})\n  }\n\n  const stcoBox = {\n    version,\n    flags,\n    samples,\n  }\n\n  return stcoBox\n}\n","import Stream from '../stream'\n\nexport default function smhd(buffer) {\n  const stream = new Stream(buffer)\n\n  const version = stream.readByte(1)\n  const flags = stream.readByte(3)\n  const data = []\n  for (let i = 0; i < 4; i++) {\n    data.push(stream.readByte(1))\n  }\n\n  const smhdBox = {\n    version,\n    flags,\n    data,\n  }\n\n  return smhdBox\n}\n","import Stream from '../stream'\nimport Box from '../mp4Box'\n\nexport default function mp4a(buffer) {\n  const stream = new Stream(buffer)\n\n  // reserved\n  stream.readByte(4)\n  stream.readByte(2)\n  const dataReferenceIndex = stream.readByte(2)\n  // preDefined\n  stream.readByte(2)\n  // reserved\n  stream.readByte(2)\n  // preDefined\n  stream.readByte(4)\n  const channelCount = stream.readByte(2)\n  const sampleSize = stream.readByte(2)\n\n  // reserved\n  stream.readByte(4)\n  const sampleRate = stream.readByte(4) / (1 << 16)\n\n  const esdsBuffer = stream.buffer.slice(28)\n  const newStream = new Stream(esdsBuffer)\n  const MP4Box = new Box()\n\n  MP4Box.readSize(newStream)\n  MP4Box.readType(newStream)\n  MP4Box.readBody(newStream)\n  const esdsBox = MP4Box.box\n\n  const mp4aBox = {\n    dataReferenceIndex,\n    channelCount,\n    sampleSize,\n    sampleRate,\n    esds: esdsBox,\n  }\n\n  return mp4aBox\n}\n","import Stream from '../stream'\n\nconst TAGS = [\n  null,\n  null,\n  null,\n  'ESDescrTag',\n  'DecoderConfigDescrTag',\n  'DecSpecificDescrTag',\n]\n\nexport default function esds(buffer) {\n  const stream = new Stream(buffer)\n\n  const version = stream.readByte(1)\n  const flags = stream.readByte(3)\n\n  const type = TAGS[stream.readByte(1)]\n  const esdsBox = {\n    version,\n    flags,\n    [type]: getESDescrTag(stream),\n  }\n\n  return esdsBox\n}\n\nfunction getESDescrTag(stream) {\n  const data = {}\n\n  let size = stream.readByte(1)\n  if (size === 0x80) {\n    stream.readByte(2)\n    size = stream.readByte(1) + 5\n  } else {\n    size += 2\n  }\n\n  data.size = size\n  data.ESID = stream.readByte(2)\n  data.streamPriority = stream.readByte(1)\n\n  data[TAGS[stream.readByte(1)]] = getDecoderConfigDescrTag(stream)\n  data[TAGS[stream.readByte(1)]] = getDecSpecificDescrTag(stream)\n  return data\n}\n\nfunction getDecoderConfigDescrTag(stream) {\n  const data = {}\n\n  let size = stream.readByte(1)\n  if (size === 0x80) {\n    stream.readByte(2)\n    size = stream.readByte(1) + 5\n  } else {\n    size += 2\n  }\n\n  data.size = size\n  data.objectTypeIndication = stream.readByte(1)\n  const type = stream.readByte(1)\n  data.streamType = type & ((1 << 7) - 1)\n  data.upStream = type & (1 << 1)\n  data.bufferSize = stream.readByte(3)\n  data.maxBitrate = stream.readByte(4)\n  data.avgBitrate = stream.readByte(4)\n\n  return data\n}\n\nfunction getDecSpecificDescrTag(stream) {\n  const data = {}\n  let size = stream.readByte(1)\n  let dataSize = size\n  if (size === 0x80) {\n    stream.readByte(2)\n    size = stream.readByte(1) + 5\n    dataSize = size - 5\n  } else {\n    size += 2\n  }\n\n  data.size = size\n  const EScode = []\n  for (let i = 0; i < dataSize; i++) {\n    EScode.push(\n      Number(stream.readByte(1))\n        .toString(16)\n        .padStart(2, '0')\n    )\n  }\n  data.audioConfig = EScode.map(item => Number(`0x${item}`))\n\n  return data\n}\n","import Stream from '../stream'\n\nexport default function meta(buffer) {\n  const stream = new Stream(buffer)\n\n  const version = stream.readByte(1)\n  const flags = stream.readByte(3)\n\n  const metaBox = {\n    version,\n    flags,\n  }\n\n  return metaBox\n}\n","import Stream from '../stream'\n\nexport default function mdat(buffer) {\n  const stream = new Stream(buffer)\n\n  const data = stream.buffer.subarray(stream.position, stream.buffer.length)\n\n  const mdatBox = {\n    data,\n  }\n\n  return mdatBox\n}\n","import Stream from '../stream'\n\nexport default function sdtp(buffer) {\n  const stream = new Stream(buffer)\n\n  const version = stream.readByte(1)\n  const flags = stream.readByte(3)\n\n  const samplesFlag = []\n\n  for (let i = stream.position; i < buffer.length; i++) {\n    const tmpByte = stream.readByte(1)\n    samplesFlag.push({\n      isLeading: tmpByte >> 6,\n      dependsOn: (tmpByte >> 4) & 0x3,\n      isDepended: (tmpByte >> 2) & 0x3,\n      hasRedundancy: tmpByte & 0x3,\n    })\n  }\n\n  const sdtpBox = {\n    version,\n    flags,\n    samplesFlag,\n  }\n\n  return sdtpBox\n}\n","import Stream from '../stream'\n\nexport default function thmb(buffer) {\n  const stream = new Stream(buffer)\n\n  const data = stream.readByte(buffer.length)\n\n  const thmbBox = {\n    data,\n  }\n\n  return thmbBox\n}\n","import ftyp from './ftyp'\nimport mvhd from './mvhd'\nimport tkhd from './tkhd'\nimport elst from './elst'\nimport mdhd from './mdhd'\nimport hdlr from './hdlr'\nimport vmhd from './vmhd'\nimport dref from './dref'\nimport url from './url'\nimport stsd from './stsd'\nimport avc1 from './avc1'\nimport avcC from './avcC'\nimport stts from './stts'\nimport stss from './stss'\nimport ctts from './ctts'\nimport stsc from './stsc'\nimport stsz from './stsz'\nimport stco from './stco'\nimport smhd from './smhd'\nimport mp4a from './mp4a'\nimport esds from './esds'\nimport meta from './meta'\nimport mdat from './mdat'\nimport sdtp from './sdtp'\nimport thmb from './thmb'\n\nexport default {\n  ftyp,\n  mvhd,\n  tkhd,\n  elst,\n  mdhd,\n  hdlr,\n  vmhd,\n  dref,\n  'url ': url,\n  stsd,\n  avc1,\n  avcC,\n  stts,\n  stss,\n  ctts,\n  stsc,\n  stsz,\n  stco,\n  smhd,\n  mp4a,\n  esds,\n  meta,\n  mdat,\n  sdtp,\n  thmb,\n}\n","import boxParse from './boxes'\nimport Stream from './stream'\n\nconst CONTAINER_BOXES = ['moov', 'trak', 'edts', 'mdia', 'minf', 'dinf', 'stbl']\n\nconst SPECIAL_BOXES = ['udta', 'free']\n\nexport default class MP4Box {\n  constructor() {\n    this.size = 0\n    this.type = ''\n    this.start = 0\n    this.box = {}\n  }\n\n  readSize(stream) {\n    this.start = stream.position\n    this.size = stream.readByte(4)\n  }\n\n  readType(stream) {\n    this.type = stream.readType()\n\n    // 一个 box 的 size 只可能大于等于 8\n    // 如果从 readSize 中解析出来的 mdat size 为 1，则表明此视频比较大，需要 type 后的 8 个字节来计算实际大小\n    if (this.size === 1) {\n      this.size = stream.readByte(4) << 32\n      this.size |= stream.readByte(4)\n    }\n  }\n\n  readBody(stream) {\n    this.data = stream.buffer.slice(stream.position, this.size + this.start)\n    if (\n      CONTAINER_BOXES.find(item => item === this.type) ||\n      SPECIAL_BOXES.find(item => item === this.type)\n    ) {\n      this.parserContainerBox()\n    } else {\n      if (!boxParse[this.type]) {\n        this.box = {}\n      } else {\n        this.box = {\n          ...this.box,\n          ...boxParse[this.type](this.data),\n        }\n      }\n    }\n\n    stream.position += this.data.length\n  }\n\n  parserContainerBox() {\n    const stream = new Stream(this.data)\n    const size = stream.buffer.length\n    while (stream.position < size) {\n      const Box = new MP4Box()\n      Box.readSize(stream)\n      Box.readType(stream)\n      Box.readBody(stream)\n\n      if (Box.type === 'trak' && Box.box.mdia && Box.box.mdia.hdlr) {\n        const handlerType = Box.box.mdia.hdlr.handlerType\n        if (handlerType === 'vide') {\n          this.box.videoTrak = Box.box\n        } else if (handlerType === 'soun') {\n          this.box.audioTrak = Box.box\n        } else {\n          this.box[`${handlerType}Trak`] = Box.box\n        }\n      } else {\n        this.box[Box.type] = Box.box\n      }\n    }\n  }\n}\n","import Stream from './stream'\nimport Box from './mp4Box'\n\nexport default class MP4Parse {\n  constructor(buffer) {\n    this.buffer = buffer\n    this.stream = new Stream(buffer)\n    this.mp4BoxTreeObject = {}\n    this.init()\n  }\n\n  init() {\n    this.parse()\n  }\n\n  parse() {\n    while (this.stream.position < this.buffer.length) {\n      const MP4Box = new Box()\n      MP4Box.readSize(this.stream)\n      MP4Box.readType(this.stream)\n      MP4Box.readBody(this.stream)\n      this.mp4BoxTreeObject[MP4Box.type] = MP4Box.box\n      this.mp4BoxTreeObject[MP4Box.type].size = MP4Box.size\n    }\n  }\n}\n","export default function findBox(mp4BoxTree, type) {\n  switch (type) {\n    case 'moov':\n      return findMoovBox(mp4BoxTree)\n    case 'mvhd':\n      return findMvhdBox(mp4BoxTree)\n    case 'videoTrak':\n      return findVideoTrakBox(mp4BoxTree)\n    case 'audioTrak':\n      return findAudioTrakBox(mp4BoxTree)\n    case 'videoTkhd':\n      return findVideoTkhdBox(mp4BoxTree)\n    case 'audioTkhd':\n      return findAudioTkhdBox(mp4BoxTree)\n    case 'videoStbl':\n      return findVideoStblBox(mp4BoxTree)\n    case 'audioStbl':\n      return findAudioStblBox(mp4BoxTree)\n    case 'videoStsc':\n      return findVideoStscBox(mp4BoxTree)\n    case 'audioStsc':\n      return findAudioStscBox(mp4BoxTree)\n    case 'avcC':\n      return findAvcCBox(mp4BoxTree)\n    case 'esds':\n      return findEsdsBox(mp4BoxTree)\n    case 'videoStco':\n      return findVideoStcoBox(mp4BoxTree)\n    case 'audioStco':\n      return findAudioStcoBox(mp4BoxTree)\n    case 'videoStts':\n      return findVideoSttsBox(mp4BoxTree)\n    case 'audioStts':\n      return findAudioSttsBox(mp4BoxTree)\n    case 'audioMdhd':\n      return findAudioMdhdBox(mp4BoxTree)\n    case 'videoMdhd':\n      return findVideoMdhdBox(mp4BoxTree)\n    case 'videoStss':\n      return findVideoStssBox(mp4BoxTree)\n    case 'videoStsz':\n      return findVideoStszBox(mp4BoxTree)\n    case 'videoCtts':\n      return findVideoCttsBox(mp4BoxTree)\n    case 'audioStsz':\n      return findAudioStszBox(mp4BoxTree)\n    case 'mp4a':\n      return findMp4aBox(mp4BoxTree)\n    case 'audioElst':\n      return findAudioElstBox(mp4BoxTree)\n    case 'videoElst':\n      return findVideoElstBox(mp4BoxTree)\n\n    default:\n      return {}\n  }\n}\n\nfunction findMoovBox(mp4BoxTree) {\n  return mp4BoxTree['moov']\n}\n\nfunction findMvhdBox(mp4BoxTree) {\n  return findMoovBox(mp4BoxTree)['mvhd']\n}\n\nfunction findVideoTrakBox(mp4BoxTree) {\n  return findMoovBox(mp4BoxTree)['videoTrak']\n}\n\nfunction findVideoTkhdBox(mp4BoxTree) {\n  return findVideoTrakBox(mp4BoxTree)['tkhd']\n}\n\nfunction findVideoStblBox(mp4BoxTree) {\n  return findVideoTrakBox(mp4BoxTree)['mdia']['minf']['stbl']\n}\n\nfunction findAudioTrakBox(mp4BoxTree) {\n  return findMoovBox(mp4BoxTree)['audioTrak']\n}\n\nfunction findAudioStblBox(mp4BoxTree) {\n  return findAudioTrakBox(mp4BoxTree)['mdia']['minf']['stbl']\n}\n\nfunction findAudioTkhdBox(mp4BoxTree) {\n  return findAudioTrakBox(mp4BoxTree)['tkhd']\n}\n\nfunction findVideoStscBox(mp4BoxTree) {\n  return findVideoStblBox(mp4BoxTree)['stsc']\n}\n\nfunction findAudioStscBox(mp4BoxTree) {\n  return findAudioStblBox(mp4BoxTree)['stsc']\n}\n\nfunction findAvcCBox(mp4BoxTree) {\n  return findVideoStblBox(mp4BoxTree)['stsd']['avc1'][0]['avcC']\n}\n\nfunction findMp4aBox(mp4BoxTree) {\n  return findAudioStblBox(mp4BoxTree)['stsd']['mp4a'][0]\n}\n\nfunction findEsdsBox(mp4BoxTree) {\n  return findMp4aBox(mp4BoxTree)['esds']\n}\n\nfunction findVideoStcoBox(mp4BoxTree) {\n  return findVideoStblBox(mp4BoxTree)['stco']\n}\n\nfunction findAudioStcoBox(mp4BoxTree) {\n  return findAudioStblBox(mp4BoxTree)['stco']\n}\n\nfunction findVideoSttsBox(mp4BoxTree) {\n  return findVideoStblBox(mp4BoxTree)['stts']\n}\n\nfunction findAudioSttsBox(mp4BoxTree) {\n  return findAudioStblBox(mp4BoxTree)['stts']\n}\n\nfunction findVideoMdhdBox(mp4BoxTree) {\n  return findVideoTrakBox(mp4BoxTree)['mdia']['mdhd']\n}\n\nfunction findAudioMdhdBox(mp4BoxTree) {\n  return findAudioTrakBox(mp4BoxTree)['mdia']['mdhd']\n}\n\nfunction findVideoStssBox(mp4BoxTree) {\n  return findVideoStblBox(mp4BoxTree)['stss']\n}\n\nfunction findVideoStszBox(mp4BoxTree) {\n  return findVideoStblBox(mp4BoxTree)['stsz']\n}\n\nfunction findAudioStszBox(mp4BoxTree) {\n  return findAudioStblBox(mp4BoxTree)['stsz']\n}\n\nfunction findVideoCttsBox(mp4BoxTree) {\n  return findVideoStblBox(mp4BoxTree)['ctts']\n}\n\nfunction findAudioElstBox(mp4BoxTree) {\n  return findAudioTrakBox(mp4BoxTree)['edts']['elst']\n}\n\nfunction findVideoElstBox(mp4BoxTree) {\n  return findAudioTrakBox(mp4BoxTree)['edts']['elst']\n}\n","export default function getSamplesOffset(stszBox, stscBoxSamplesPerChunkArray) {\n  const samplesOffset = []\n  for (let i = 0, j = 0; i < stscBoxSamplesPerChunkArray.length; i++) {\n    if (i + j >= stszBox.samples.length) {\n      break\n    }\n\n    samplesOffset.push(stszBox.samples[i + j].entrySize)\n    if (stscBoxSamplesPerChunkArray[i] !== 1) {\n      for (let flag = 1; flag < stscBoxSamplesPerChunkArray[i]; flag++) {\n        const offset =\n          stszBox.samples[i + flag + j].entrySize +\n          samplesOffset[i + flag - 1 + j]\n        samplesOffset.push(offset)\n      }\n      j = j + stscBoxSamplesPerChunkArray[i] - 1\n    }\n  }\n\n  return samplesOffset\n}\n","export default function getPerChunkArray(stscBox, end) {\n  const stscBoxSamplesPerChunkArray = []\n  const stscSamplesLength = stscBox.samples.length\n\n  // stsc box\n  // firstChunk         1  3  6  7\n  // samplesPerChunk    1  2  1  2\n  // ↓\n  // [1,1,2,2,2,1,2,2]\n  for (let i = 0; i < end; i++) {\n    if (\n      i !== 0 &&\n      i < stscSamplesLength &&\n      stscBox.samples[i].firstChunk - 1 !== stscBox.samples[i - 1].firstChunk\n    ) {\n      i--\n      stscBox.samples[i].firstChunk++\n    }\n\n    // 处理最后一位不是 end 时的情况\n    if (i >= stscSamplesLength) {\n      if (stscBox.samples[stscSamplesLength - 1] !== 1) {\n        i = i + stscBox.samples[stscSamplesLength - 1].samplesPerChunk - 1\n      }\n      stscBoxSamplesPerChunkArray.push(\n        stscBox.samples[stscSamplesLength - 1].samplesPerChunk\n      )\n    } else {\n      stscBoxSamplesPerChunkArray.push(stscBox.samples[i].samplesPerChunk)\n    }\n  }\n\n  return stscBoxSamplesPerChunkArray\n}\n","export default function getFragmentPosition(\n  videoSamples,\n  audioSamples,\n  mdatStart,\n  isLastFragmentPosition\n) {\n  const videoSamplesEnd = videoSamples[videoSamples.length - 1].end\n  let videoSamplesStart = 0\n\n  if (videoSamples.length > 0) {\n    videoSamplesStart = videoSamples[0].start\n  }\n\n  // maybe the last GOP dont have audio track\n  // 最后一个 GOP 序列可能没有音频轨\n  let audioSamplesEnd = 0\n  let audioSamplesStart = Number.MAX_SAFE_INTEGER\n  if (audioSamples.length !== 0) {\n    audioSamplesEnd = audioSamples[audioSamples.length - 1].end\n    audioSamplesStart = audioSamples[0].start\n  }\n\n  const fragmentEndPosition = isLastFragmentPosition\n    ? ''\n    : Math.max(videoSamplesEnd, audioSamplesEnd) + mdatStart\n  const fragmentStartPosition =\n    Math.min(videoSamplesStart, audioSamplesStart) + mdatStart\n\n  return [fragmentStartPosition, fragmentEndPosition]\n}\n","import cloneDeep from 'lodash/cloneDeep'\nimport findBox from './findBox'\nimport getPerChunkArray from './getPerChunkArray'\n\nexport default function getBufferStart(\n  mp4BoxTree,\n  videoOffsetStart = 0,\n  audioOffsetStart = 0\n) {\n  return Math.min(\n    getChunkSize(mp4BoxTree, videoOffsetStart, 'video'),\n    getChunkSize(mp4BoxTree, audioOffsetStart, 'audio')\n  )\n}\n\nfunction getChunkSize(mp4BoxTree, offsetStart, type) {\n  const stscBox = cloneDeep(\n    findBox(mp4BoxTree, type === 'video' ? 'videoStsc' : 'audioStsc')\n  )\n  let newOffsetStart = 0\n  const stscBoxSamplesPerChunkArray = getPerChunkArray(stscBox, offsetStart)\n  let chunkIndex = 0\n  for (\n    let i = 0;\n    offsetStart > 0 && i <= stscBoxSamplesPerChunkArray.length;\n    i++\n  ) {\n    newOffsetStart += stscBoxSamplesPerChunkArray[i]\n    if (newOffsetStart === offsetStart) {\n      chunkIndex = i + 1\n      break\n    } else if (newOffsetStart > offsetStart) {\n      newOffsetStart -= stscBoxSamplesPerChunkArray[i]\n      chunkIndex = i\n      break\n    }\n  }\n  const sampleInterval = [newOffsetStart, offsetStart]\n\n  const stszBox = findBox(\n    mp4BoxTree,\n    type === 'video' ? 'videoStsz' : 'audioStsz'\n  )\n  let sampleSize = 0\n  // 考虑到 stsc 不为 1 的情况\n  const samples = stszBox.samples.slice(sampleInterval[0], sampleInterval[1])\n  for (let i = 0; i < samples.length; i++) {\n    sampleSize += samples[i].entrySize\n  }\n\n  const stcoBox = findBox(\n    mp4BoxTree,\n    type === 'video' ? 'videoStco' : 'audioStco'\n  )\n\n  // 如果最后一个 GOP 没有音频轨，BufferStart 需要按照视频轨来计算。\n  // If the last GOP dont have audio track, we should ignore the audio chunk size.\n  if (chunkIndex >= stcoBox.samples.length) {\n    return Number.MAX_SAFE_INTEGER\n  }\n\n  return stcoBox.samples[chunkIndex].chunkOffset + sampleSize\n}\n","import cloneDeep from 'lodash/cloneDeep'\nimport findBox from './findBox'\nimport getPerChunkArray from './getPerChunkArray'\nimport getSamplesOffset from './getSamplesOffset'\n\nexport function getVideoSamples(mp4BoxTree, bufferStart, offsetInterVal) {\n  const cttsBox = cloneDeep(findBox(mp4BoxTree, 'videoCtts'))\n\n  const compositionTimeOffset = []\n\n  if (cttsBox) {\n    for (let i = 0; i < cttsBox.samples.length; i++) {\n      compositionTimeOffset.push(cttsBox.samples[i].sampleOffset)\n      if (cttsBox.samples[i].sampleCount !== 1) {\n        cttsBox.samples[i].sampleCount--\n        i--\n      }\n    }\n  }\n\n  return getSamples(\n    mp4BoxTree,\n    bufferStart,\n    offsetInterVal,\n    compositionTimeOffset\n  )\n}\n\nexport function getAudioSamples(mp4BoxTree, bufferStart, offsetInterVal) {\n  return getSamples(mp4BoxTree, bufferStart, offsetInterVal)\n}\n\nfunction getSamples(\n  mp4BoxTree,\n  bufferStart,\n  [offsetStart, offsetEnd],\n  compositionTimeOffset\n) {\n  const samples = []\n  const sttsBox = findBox(\n    mp4BoxTree,\n    compositionTimeOffset ? 'videoStts' : 'audioStts'\n  )\n  const stszBox = findBox(\n    mp4BoxTree,\n    compositionTimeOffset ? 'videoStsz' : 'audioStsz'\n  )\n  const stcoBox = findBox(\n    mp4BoxTree,\n    compositionTimeOffset ? 'videoStco' : 'audioStco'\n  )\n  const stscBox = cloneDeep(\n    findBox(mp4BoxTree, compositionTimeOffset ? 'videoStsc' : 'audioStsc')\n  )\n  const stscBoxSamplesPerChunkArray = getPerChunkArray(stscBox, offsetEnd)\n\n  const samplesOffset = getSamplesOffset(stszBox, stscBoxSamplesPerChunkArray)\n\n  const sttsFormatBox = []\n  for (let i = 0; i < sttsBox.samples.length; i++) {\n    const {sampleCount, sampleDelta} = sttsBox.samples[i]\n    sttsFormatBox.push({\n      sampleCount:\n        sampleCount +\n        (sttsFormatBox[i - 1] ? sttsFormatBox[i - 1].sampleCount : 0),\n      sampleDelta,\n    })\n  }\n\n  // 算法不太好，可以和下面 for 循环结合，用双指针来做\n  // FIXME\n  const chunkOffsetArray = []\n  for (let i = 0; i < stscBoxSamplesPerChunkArray.length; i++) {\n    for (let j = 0; j < stscBoxSamplesPerChunkArray[i]; j++) {\n      const sample = stcoBox.samples[i]\n      chunkOffsetArray.push(\n        sample\n          ? sample.chunkOffset\n          : stcoBox.samples[stcoBox.samples.length - 1].chunkOffset\n      )\n    }\n  }\n\n  for (let i = offsetStart; i < offsetEnd; i++) {\n    const {entrySize: size} = stszBox.samples[i]\n\n    const end = chunkOffsetArray[i] - bufferStart + samplesOffset[i]\n    const start = end - size\n\n    const duration = sttsFormatBox.find((sample, idx) => {\n      if (sttsFormatBox[idx - 1]) {\n        return (\n          i + 1 <= sample.sampleCount &&\n          i + 1 > sttsFormatBox[idx - 1].sampleCount\n        )\n      } else {\n        return i + 1 <= sample.sampleCount\n      }\n    }).sampleDelta\n\n    samples.push({\n      // 只有 video 有此字段，没有 B 帧的视频，compositionTimeOffset 为 0\n      ...(compositionTimeOffset && {\n        compositionTimeOffset: compositionTimeOffset.length\n          ? compositionTimeOffset[i]\n          : 0,\n      }),\n      duration,\n      size,\n      start,\n      end,\n      bufferStart,\n    })\n  }\n  return samples\n}\n","export default function getDuration(sttsBox, totalCount) {\n  let count = 0\n  let duration = 0\n  for (let i = 0; i < sttsBox.samples.length; i++) {\n    const {sampleCount, sampleDelta} = sttsBox.samples[i]\n    for (let j = 0; j < sampleCount; j++) {\n      if (count < totalCount && totalCount !== 0) {\n        duration += sampleDelta\n        count++\n      } else {\n        return duration\n      }\n    }\n  }\n  return duration\n}\n","import cloneDeep from 'lodash/cloneDeep'\nimport findBox from './findBox'\nimport getDuration from './getDuration'\n\nexport function getVideoSamplesInterval(mp4BoxTree, time = 0) {\n  const stssBox = cloneDeep(findBox(mp4BoxTree, 'videoStss'))\n  const sttsBox = cloneDeep(findBox(mp4BoxTree, 'videoStts'))\n  const stszBox = findBox(mp4BoxTree, 'videoStsz')\n  const duration = getDuration(sttsBox, stszBox.samples.length)\n\n  const intervalArray = getIntervalArray(stssBox, stszBox)\n  const timeInterval = intervalArray.map(interval =>\n    getDuration(sttsBox, interval)\n  )\n\n  const interval = {\n    offsetInterVal: [],\n    timeInterVal: [],\n  }\n  for (let i = 0; i < timeInterval.length; i++) {\n    const start = timeInterval[i]\n    const end = timeInterval[i + 1] ? timeInterval[i + 1] : duration\n\n    if (start <= time && time < end) {\n      const offsetStart = intervalArray[i]\n      const offsetEnd =\n        intervalArray[i + 1] !== undefined\n          ? intervalArray[i + 1]\n          : stszBox.samples.length\n      interval.offsetInterVal.push(offsetStart, offsetEnd)\n      interval.timeInterVal.push(start, end)\n      break\n    }\n  }\n\n  return interval\n}\n\nexport function getAudioSamplesInterval(mp4BoxTree, videoInterval) {\n  const {\n    timeInterVal: [startTime, endTime],\n    offsetInterVal,\n  } = videoInterval\n  const sttsBox = cloneDeep(findBox(mp4BoxTree, 'audioStts'))\n  const {timescale: audioTimescale} = findBox(mp4BoxTree, 'audioMdhd')\n  const {timescale: videoTimescale} = findBox(mp4BoxTree, 'videoMdhd')\n  const videoStszBox = findBox(mp4BoxTree, 'videoStsz')\n  const audioStszBox = findBox(mp4BoxTree, 'audioStsz')\n  const audioElstBox = findBox(mp4BoxTree, 'audioElst')\n\n  const audioStartTime = (startTime / videoTimescale) * audioTimescale\n  const audioEndTime = (endTime / videoTimescale) * audioTimescale\n\n  let start = 0\n  let end = 0\n\n  const {mediaTime, segmentDuration} = audioElstBox.entries[0]\n  let startDuration = mediaTime !== -1 ? mediaTime : segmentDuration\n  let endDuration = 0\n  for (let i = 0; i < sttsBox.samples.length; i++) {\n    const {sampleCount, sampleDelta} = sttsBox.samples[i]\n    for (let j = 0; j < sampleCount; j++) {\n      if (startDuration <= audioStartTime && audioStartTime !== 0) {\n        startDuration += sampleDelta\n        start++\n      }\n\n      if (endDuration <= audioEndTime) {\n        endDuration += sampleDelta\n        end++\n      }\n    }\n  }\n\n  // 如果是 video 的最后一个片段，也就是 audio 的最有一个片段\n  // 使用 stsz 的长度来判断\n  let audioEnd\n  if (offsetInterVal[1] === videoStszBox.samples.length) {\n    audioEnd = audioStszBox.samples.length\n  }\n  const interval = {\n    offsetInterVal: [start, audioEnd ? audioEnd : end],\n    timeInterVal: [startDuration, endDuration],\n  }\n\n  return interval\n}\n\nexport function getNextVideoSamplesInterval(mp4BoxTree, sample) {\n  const stssBox = cloneDeep(findBox(mp4BoxTree, 'videoStss'))\n  const sttsBox = cloneDeep(findBox(mp4BoxTree, 'videoStts'))\n  const stszBox = findBox(mp4BoxTree, 'videoStsz')\n  const sampleCount = stszBox.samples.length\n  const duration = getDuration(sttsBox, sampleCount)\n\n  const intervalArray = getIntervalArray(stssBox, stszBox)\n\n  const timeInterval = intervalArray.map(interval =>\n    getDuration(sttsBox, interval)\n  )\n  let result = []\n  if (sample + 1 > intervalArray[intervalArray.length - 1]) {\n    result = {\n      offsetInterVal: [intervalArray[intervalArray.length - 1], sampleCount],\n      timeInterVal: [timeInterval[intervalArray.length - 1], duration],\n    }\n  }\n  for (let i = 0; i < intervalArray.length; i++) {\n    if (intervalArray[i] < sample + 1 && intervalArray[i + 1] >= sample + 1) {\n      result = {\n        offsetInterVal: [intervalArray[i], intervalArray[i + 1]],\n        timeInterVal: [timeInterval[i], timeInterval[i + 1]],\n      }\n      break\n    }\n  }\n  return result\n}\n\nexport function getIntervalArray(stssBox, stszBox) {\n  let intervalArray = []\n  if (stssBox) {\n    intervalArray = stssBox.samples.map(sample => sample.sampleNumber - 1)\n  } else {\n    // make a fake GOP when video dont have B/P frame\n    for (let i = 0; i <= Math.floor(stszBox.samples.length / 5); i++) {\n      intervalArray.push(i * 5)\n    }\n  }\n\n  return intervalArray\n}\n","export function getVideoTrackInfo(videoSamples, mdatBuffer) {\n  return {\n    samples: videoSamples.map(sample => ({\n      ...sample,\n      buffer: mdatBuffer.slice(sample.start, sample.end),\n    })),\n    trackId: 1,\n  }\n}\n\nexport function getAudioTrackInfo(audioSamples, mdatBuffer) {\n  return {\n    samples: audioSamples.map(sample => ({\n      ...sample,\n      buffer: mdatBuffer.slice(sample.start, sample.end),\n    })),\n    trackId: 2,\n  }\n}\n","import {\n  findBox,\n  getBufferStart,\n  getFragmentPosition,\n  getVideoTrackInfo,\n  getAudioTrackInfo,\n  getVideoSamples,\n  getAudioSamples,\n  getAudioSamplesInterval,\n  getVideoSamplesInterval,\n  getNextVideoSamplesInterval,\n} from './utils'\n\nexport default class MP4Probe {\n  constructor(mp4BoxTree) {\n    this.mp4BoxTree = mp4BoxTree\n    this.mp4Data = {}\n    this.init()\n  }\n\n  updateInterval = time => {\n    const {videoTimescale, audioTimescale} = this.mp4Data\n\n    if (typeof time === 'number') {\n      this.videoInterval = getVideoSamplesInterval(\n        this.mp4BoxTree,\n        time * videoTimescale\n      )\n    } else {\n      this.videoInterval = getNextVideoSamplesInterval(\n        this.mp4BoxTree,\n        this.videoInterval.offsetInterVal[1]\n      )\n    }\n\n    this.audioInterval = getAudioSamplesInterval(\n      this.mp4BoxTree,\n      this.videoInterval\n    )\n\n    const videoTimeRange = this.videoInterval.timeInterVal.map(\n      time => time / videoTimescale\n    )\n    const audioTimeRange = this.audioInterval.timeInterVal.map(\n      time => time / audioTimescale\n    )\n\n    this.timeRange = [\n      Math.min(videoTimeRange[0], audioTimeRange[0]),\n      Math.max(videoTimeRange[1], audioTimeRange[1]),\n    ]\n  }\n\n  isDraining = time =>\n    time > (this.timeRange[1] - this.timeRange[0]) / 4 + this.timeRange[0]\n\n  getFragmentPosition = time => {\n    this.updateInterval(time)\n\n    this.bufferStart = getBufferStart(\n      this.mp4BoxTree,\n      this.videoInterval.offsetInterVal[0],\n      this.audioInterval.offsetInterVal[0]\n    )\n\n    const {videoSamples, audioSamples} = this.getSamples()\n    const stcoBox = findBox(this.mp4BoxTree, 'videoStco')\n\n    let videoSamplesStart = 0\n    if (videoSamples.length > 0) {\n      videoSamplesStart = videoSamples[videoSamples.length - 1].start\n    }\n    const isLastFragmentPosition =\n      videoSamplesStart + videoSamples[videoSamples.length - 1].bufferStart ===\n      stcoBox.samples[stcoBox.samples.length - 1].chunkOffset\n\n    return getFragmentPosition(\n      videoSamples,\n      audioSamples,\n      this.bufferStart,\n      isLastFragmentPosition\n    )\n  }\n\n  getSamples = () => {\n    const videoSamples = getVideoSamples(\n      this.mp4BoxTree,\n      this.bufferStart,\n      this.videoInterval.offsetInterVal\n    )\n\n    const audioSamples = getAudioSamples(\n      this.mp4BoxTree,\n      this.bufferStart,\n      this.audioInterval.offsetInterVal\n    )\n\n    return {\n      videoSamples,\n      audioSamples,\n    }\n  }\n\n  getTrackInfo = mdatBuffer => {\n    const {videoSamples, audioSamples} = this.getSamples()\n    const videoTrackInfo = getVideoTrackInfo(videoSamples, mdatBuffer)\n    const audioTrackInfo = getAudioTrackInfo(audioSamples, mdatBuffer)\n\n    return {\n      videoTrackInfo,\n      audioTrackInfo,\n    }\n  }\n\n  init() {\n    this.getMP4Data()\n  }\n\n  getMP4Data() {\n    const {duration, timescale} = findBox(this.mp4BoxTree, 'mvhd')\n\n    const {channelCount, sampleRate} = findBox(this.mp4BoxTree, 'mp4a')\n    const {timescale: audioTimescale, duration: audioDuration} = findBox(\n      this.mp4BoxTree,\n      'audioMdhd'\n    )\n\n    const {\n      ESDescrTag: {\n        DecSpecificDescrTag: {audioConfig},\n      },\n    } = findBox(this.mp4BoxTree, 'esds')\n\n    this.mp4Data = {\n      duration,\n      timescale,\n      channelCount,\n      sampleRate,\n      audioConfig,\n      audioDuration,\n      audioTimescale,\n    }\n\n    const hasVideoStream = findBox(this.mp4BoxTree, 'videoTrak')\n    if (hasVideoStream) {\n      const {width, height} = findBox(this.mp4BoxTree, 'videoTkhd')\n      const {samples} = findBox(this.mp4BoxTree, 'videoStsz')\n      const {SPS, PPS} = findBox(this.mp4BoxTree, 'avcC')\n      const {timescale: videoTimescale, duration: videoDuration} = findBox(\n        this.mp4BoxTree,\n        'videoMdhd'\n      )\n\n      this.mp4Data = {\n        ...this.mp4Data,\n        width,\n        height,\n        SPS,\n        PPS,\n        videoDuration,\n        videoTimescale,\n        videoSamplesLength: samples.length,\n      }\n    }\n  }\n}\n","export default function generateVersionAndFlags(version, flag) {\n  return new Uint8Array([\n    version & 0xff,\n    (flag >> 16) & 0xff,\n    (flag >> 8) & 0xff,\n    flag & 0xff,\n  ])\n}\n","export default function concatTypedArray(...arrays) {\n  let totalLength = 0\n  for (const arr of arrays) {\n    totalLength += arr.length\n  }\n  const result = new Uint8Array(totalLength)\n  let offset = 0\n  for (const arr of arrays) {\n    result.set(arr, offset)\n    offset += arr.length\n  }\n  return result\n}\n","export function num2FourBytes(num) {\n  return new Uint8Array([\n    (num >>> 24) & 0xff,\n    (num >>> 16) & 0xff,\n    (num >>> 8) & 0xff,\n    num & 0xff,\n  ])\n}\n\nexport function num2EightBytes(num) {\n  const upper = num / Math.pow(2, 32)\n  const lower = num % Math.pow(2, 32)\n  return new Uint8Array([\n    (upper >>> 24) & 0xff,\n    (upper >>> 16) & 0xff,\n    (upper >>> 8) & 0xff,\n    upper & 0xff,\n    (lower >>> 24) & 0xff,\n    (lower >>> 16) & 0xff,\n    (lower >>> 8) & 0xff,\n    lower & 0xff,\n  ])\n}\n","const char2Hex = char => char.charCodeAt()\n\nconst str2TypedArray = str => {\n  // 字符串转 uint8 array\n  return new Uint8Array(Array.prototype.map.call(str, char2Hex))\n}\n\nexport default str2TypedArray\n","import {num2FourBytes} from './num2Bytes'\nimport str2TypedArray from './str2TypedArray'\nimport concatTypedArray from './concatTypedArray'\n\nexport default function generateBox(type, content) {\n  return concatTypedArray(\n    num2FourBytes(content.length + 8),\n    str2TypedArray(type),\n    content\n  )\n}\n","export function generatePredefined(length) {\n  return generateZeroBytes(length)\n}\n\nexport function generateReserved(length) {\n  return generateZeroBytes(length)\n}\n\nfunction generateZeroBytes(bytes) {\n  return new Uint8Array(bytes)\n}\n","import {generateBox} from '../utils'\n// prettier-ignore\nexport default () => {\n  const content = new Uint8Array([\n    0x69, 0x73, 0x6F, 0x6D, // major_brand: isom\n    0x00, 0x00, 0x00, 0x01, // minor_version: 0x01\n    0x69, 0x73, 0x6F, 0x6D, // isom\n    0x61, 0x76, 0x63, 0x31, // avc1\n  ])\n  return generateBox('ftyp', content)\n}\n","// prettier-ignore\nexport const MATRIX_TYPED_ARRAY = new Uint8Array([\n  0x00, 0x01, 0x00, 0x00,\n  0x00, 0x00, 0x00, 0x00,\n  0x00, 0x00, 0x00, 0x00,\n  0x00, 0x00, 0x00, 0x00,\n  0x00, 0x01, 0x00, 0x00,\n  0x00, 0x00, 0x00, 0x00,\n  0x00, 0x00, 0x00, 0x00,\n  0x00, 0x00, 0x00, 0x00,\n  0x40, 0x00, 0x00, 0x00, \n])\n","import {\n  num2FourBytes,\n  num2EightBytes,\n  generatePredefined,\n  generateReserved,\n  generateBox,\n} from '../utils'\nimport {MATRIX_TYPED_ARRAY} from '../utils/constants'\n\nexport default function mvhd(data) {\n  const {duration, timescale} = data\n  // prettier-ignore\n  const content =  new Uint8Array([\n    0x01, 0x00, 0x00, 0x00, // version、flags\n    0x00, 0x00, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00, // creation_time\n    0x00, 0x00, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00, // modification_time\n    ...num2FourBytes(timescale), // timescale **\n    ...num2EightBytes(duration),\n    0x00, 0x01, 0x00, 0x00, // 1.0 rate\n    0x01, 0x00, // 1.0 volume\n    ...generateReserved(10), \n    ...MATRIX_TYPED_ARRAY,\n    ...generatePredefined(24), // pre_defined\n    0xff, 0xff, 0xff, 0xff // next_track_ID\n  ])\n  return generateBox('mvhd', content)\n}\n","import {\n  num2FourBytes,\n  num2EightBytes,\n  generateReserved,\n  generateBox,\n  generateVersionAndFlags,\n} from '../utils'\nimport {MATRIX_TYPED_ARRAY} from '../utils/constants'\n\nexport default function tkhd(data) {\n  const {type, duration, width, height} = data\n\n  // prettier-ignore\n  const content = new Uint8Array([\n    ...generateVersionAndFlags(1, 7), // version & flags\n    0x00, 0x00, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00, // creation_time\n    0x00, 0x00, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00, // modification_time\n    ...num2FourBytes(type === 'video' ? 1 : 2), // track_ID **\n    ...generateReserved(4),\n    ...num2EightBytes(duration),\n    ...generateReserved(8),\n    0x00, 0x00, // layer\n    0x00, 0x00, // alternate_group\n    0x00, 0x00, // volume\n    0x00, 0x00, // reserved\n    ...MATRIX_TYPED_ARRAY,\n    (width >> 8) & 0xff, width & 0xff,\n    0x00, 0x00,\n    (height >> 8) & 0xff, height & 0xff,\n    0x00, 0x00,\n  ])\n  return generateBox('tkhd', content)\n}\n","import {\n  num2FourBytes,\n  num2EightBytes,\n  generateBox,\n  generateVersionAndFlags,\n} from '../utils'\n\nexport default function mdhd(data) {\n  const {type} = data\n  let duration\n  let timescale\n  if (type === 'video') {\n    duration = data.videoDuration\n    timescale = data.videoTimescale\n  } else {\n    duration = data.audioDuration\n    timescale = data.audioTimescale\n  }\n  // prettier-ignore\n  const content = new Uint8Array([\n    ...generateVersionAndFlags(1, 0),\n    0x00, 0x00, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00, // creation_time\n    0x00, 0x00, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00, // modification_time\n    ...num2FourBytes(timescale), // timescale **\n    ...num2EightBytes(duration), // duration \n    0x55, 0xc4, // language\n    0x00, 0x00, // pre_defined\n  ])\n  return generateBox('mdhd', content)\n}\n","import {\n  generateVersionAndFlags,\n  generatePredefined,\n  generateReserved,\n  str2TypedArray,\n  generateBox,\n} from '../utils'\n\nexport default function hdlr(type) {\n  let handler = ''\n  let name = ''\n  switch (type) {\n    case 'video':\n      handler = 'vide'\n      name = 'VideoHandler'\n      break\n    case 'audio':\n      handler = 'soun'\n      name = 'SoundHandler'\n  }\n  // prettier-ignore\n  const content = new Uint8Array([\n    ...generateVersionAndFlags(0, 0),\n    ...generatePredefined(4),\n    ...str2TypedArray(handler), // **\n    ...generateReserved(12),\n    ...str2TypedArray(name),\n    0x00,\n  ])\n  return generateBox('hdlr', content)\n}\n","import {generateBox, generateVersionAndFlags} from '../utils'\n\nexport default function vmhd() {\n  // prettier-ignore\n  const content = new Uint8Array([\n    ...generateVersionAndFlags(0, 1), // version(0) + flags\n    0x00, 0x00,             // graphicsmode: 2 bytes\n    0x00, 0x00, 0x00, 0x00, // opcolor: 3 * 2 bytes\n    0x00, 0x00\n  ])\n  return generateBox('vmhd', content)\n}\n","import {generateBox, generateVersionAndFlags} from '../utils'\nexport default function smhd() {\n  // prettier-ignore\n  const content = [\n    ...generateVersionAndFlags(0, 0),\n    0x00, 0x00, 0x00, 0x00  // balance(2) + reserved(2)\n  ]\n  return generateBox('smhd', content)\n}\n","import {generateBox, concatTypedArray, generateVersionAndFlags} from '../utils'\n\nexport default function dinf() {\n  return generateBox('dinf', dref())\n}\n\nfunction dref() {\n  // prettier-ignore\n  const content = concatTypedArray(new Uint8Array([\n    ...generateVersionAndFlags(0, 0),\n    0x00, 0x00, 0x00, 0x01, // entry_count\n  ]), url())\n  return generateBox('dref', content)\n}\n\nfunction url() {\n  // prettier-ignore\n  return generateBox('url ', [ 0x00, 0x00, 0x00, 0x01])\n}\n","import {generateBox} from '../utils'\n\nexport default function avcC(data) {\n  const {SPS, PPS} = data\n  // prettier-ignore\n  const content = new Uint8Array([\n    0x01, // configurationVersion\n    SPS[1], // AVCProfileIndication\n    SPS[2], // profile_compatibility,\n    SPS[3], // AVCLevelIndication\n    0xfc | 3, // lengthSizeMinusOne`\n    0xE0 | 1, // 目前只处理一个sps **\n    SPS.length >> 8 & 0xff,\n    SPS.length & 0xff, \n    ...SPS,\n    0x01,\n    PPS.length >> 8 & 0xff, \n    PPS.length & 0xff, \n    ...PPS\n  ])\n  return generateBox('avcC', content)\n}\n","import {\n  generatePredefined,\n  generateReserved,\n  generateBox,\n  concatTypedArray,\n} from '../utils'\nimport avcC from './avcC'\n\nexport default function acv1(data) {\n  const {width, height} = data\n\n  // prettier-ignore\n  let content = new Uint8Array([\n    ...generateReserved(6),\n    0x00, 0x01,  // data_reference_index\n    ...generatePredefined(16),\n    (width >> 8) & 0xff, width & 0xff, \n    (height >> 8) & 0xff, height & 0xff, // width & height\n    0x00, 0x48, 0x00, 0x00,  // horizresolution\n    0x00, 0x48, 0x00, 0x00,  // vertresolution\n    ...generateReserved(4),\n    0x00, 0x01, // frame_count\n    0x0B,\n    0x57, 0x41, 0x4E, 0x47,\n    0x4C, 0x75, 0x76,\n    0X44, 0x41, 0x4E, 0x47,\n    ...generatePredefined(20),\n    0x00, 0x18, // depth\n    // 设置成 0x00, 0x00 的话 safari 无法正常播放。\n    0xff, 0xff, // pre_defined\n  ])\n  content = concatTypedArray(content, avcC(data))\n  return generateBox('avc1', content)\n}\n","import {generateBox, generateVersionAndFlags} from '../utils'\n\nexport default function esds(data) {\n  const {audioConfig: config = [43, 146, 8, 0]} = data\n  // prettier-ignore\n  const content = new Uint8Array([\n    ...generateVersionAndFlags(0, 0),\n    0x03, // DecoderSpecificInfo\n    0x17 + config.length, // length\n    0x00, 0x01, // es_id\n    0x00, // stream_priority\n    0x04, // DecoderConfigDescrTag\n    0x0f + config.length, // length\n    0x40, // codec\n    0x15, // stream_type\n    0x00, 0x00, 0x00, // buffer_size\n    0x00, 0x00, 0x00, 0x00, // maxBitrate\n    0x00, 0x00, 0x00, 0x00, // avgBitrate\n    0x05, // DecSpecificInfoTag\n    config.length,  // configlen\n    ...config,\n    0x06, 0x01, 0x02,  // GASpecificConfig\n  ])\n  return generateBox('esds', content)\n}\n","import {generateReserved, concatTypedArray, generateBox} from '../utils'\nimport esds from './esds'\n\nexport default function mp4a(data) {\n  const {channelCount, sampleRate} = data\n  // prettier-ignore\n  let content = new Uint8Array([\n    ...generateReserved(6),\n    0x00, 0x01, // data_reference_index\n    ...generateReserved(8),\n    0x00, channelCount,\n    0x00, 0x10, // sampleSize\n    ...generateReserved(4),\n    (sampleRate >> 8) & 0xFF,  // Audio sample rate\n    (sampleRate) & 0xFF,\n    0x00, 0x00\n  ])\n  content = concatTypedArray(content, esds(data))\n  return generateBox('mp4a', content)\n}\n","import {generateBox, concatTypedArray, generateVersionAndFlags} from '../utils'\nimport avc1 from './avc1'\nimport mp4a from './mp4a'\n\nexport default function stsd(data) {\n  const {type} = data\n  let content\n  if (type === 'video') {\n    content = avc1(data)\n  } else if (type === 'audio') {\n    content = mp4a(data)\n  }\n  content = concatTypedArray(\n    // prettier-ignore\n    new Uint8Array([\n      ...generateVersionAndFlags(0, 0), // version & flags\n      0x00, 0x00, 0x00, 0x01 // entry_count\n    ]),\n    content\n  )\n  return generateBox('stsd', content)\n}\n","import {generateBox, concatTypedArray, generateVersionAndFlags} from '../utils'\nimport stsd from './stsd'\n\nexport default function stbl(data) {\n  const content = concatTypedArray(stsd(data), stts(), stsc(), stsz(), stco())\n  return generateBox('stbl', content)\n}\n\nconst stsz = () => {\n  // prettier-ignore\n  const content = new Uint8Array([\n    ...generateVersionAndFlags(0, 0),  // version(0) + flags\n    0x00, 0x00, 0x00, 0x00,  // sample_size\n    0x00, 0x00, 0x00, 0x00   // sample_count\n  ])\n  return generateBox('stsz', content)\n}\n\nconst stsc = () => {\n  // prettier-ignore\n  const content = new Uint8Array([\n    ...generateVersionAndFlags(0, 0),  // version(0) + flags\n    0x00, 0x00, 0x00, 0x00,  // entry_count\n  ])\n  return generateBox('stsc', content)\n}\n\nconst stts = () => {\n  // prettier-ignore\n  const content = new Uint8Array([\n    ...generateVersionAndFlags(0, 0),  // version(0) + flags\n    0x00, 0x00, 0x00, 0x00,  // entry_count\n  ])\n  return generateBox('stts', content)\n}\n\nconst stco = () => {\n  // prettier-ignore\n  const content = new Uint8Array([\n    ...generateVersionAndFlags(0, 0),  // version(0) + flags\n    0x00, 0x00, 0x00, 0x00,  // entry_count\n  ])\n  return generateBox('stco', content)\n}\n","import {concatTypedArray, generateBox} from '../utils'\nimport vmhd from './vmhd'\nimport smhd from './smhd'\nimport dinf from './dinf'\nimport stbl from './stbl'\n\nexport default function minf(data) {\n  const {type} = data\n  let header = ''\n  switch (type) {\n    case 'video':\n      header = vmhd()\n      break\n    case 'audio':\n      header = smhd()\n      break\n  }\n  const content = concatTypedArray(header, dinf(), stbl(data))\n  return generateBox('minf', content)\n}\n","import {concatTypedArray, generateBox} from '../utils'\nimport mdhd from './mdhd'\nimport hdlr from './hdlr'\nimport minf from './minf'\n\nexport default function mdia(data) {\n  const content = concatTypedArray(mdhd(data), hdlr(data.type), minf(data))\n  return generateBox('mdia', content)\n}\n","import {concatTypedArray, generateBox} from '../utils'\nimport tkhd from './tkhd'\nimport mdia from './mdia'\n\nexport default function trak(data) {\n  const content = concatTypedArray(tkhd(data), mdia(data))\n  return generateBox('trak', content)\n}\n","import {\n  concatTypedArray,\n  generateBox,\n  num2FourBytes,\n  generateVersionAndFlags,\n} from '../utils'\n\nexport default function mvex(data) {\n  const content = concatTypedArray(mehd(data), trex(1), trex(2))\n  return generateBox('mvex', content)\n}\n\nexport function mehd(data) {\n  const {duration} = data\n  // prettier-ignore\n  const content = new Uint8Array([\n    ...generateVersionAndFlags(0, 0),\n    ...num2FourBytes(duration), \n  ])\n  return generateBox('mehd', content)\n}\n\nexport function trex(trackId) {\n  // prettier-ignore\n  const content = new Uint8Array([\n    ...generateVersionAndFlags(0, 0), // version & flags\n    ...num2FourBytes(trackId),\n    0x00, 0x00, 0x00, 0x01, // default_sample_description_index\n    0x00, 0x00, 0x00, 0x00, // default_sample_duration\n    0x00, 0x00, 0x00, 0x00, // default_sample_size\n    0x00, 0x01, 0x00, 0x01 // default_sample_flags\n  ])\n  return generateBox('trex', content)\n}\n","import {concatTypedArray, generateBox} from '../utils'\nimport mvhd from './mvhd'\nimport trak from './trak'\nimport mvex from './mvex'\n\nexport default function moov(data, type) {\n  const content = concatTypedArray(\n    mvhd(data),\n    trak({...data, type}),\n    mvex(data)\n  )\n  return generateBox('moov', content)\n}\n","import {num2FourBytes, generateBox, generateVersionAndFlags} from '../utils'\n\nexport default function mfhd(data) {\n  const {sequenceNumber} = data\n  // prettier-ignore\n  const content = new Uint8Array([\n    ...generateVersionAndFlags(0, 0), \n    ...num2FourBytes(sequenceNumber)\n  ])\n  return generateBox('mfhd', content)\n}\n","import {generateBox, num2FourBytes, generateVersionAndFlags} from '../utils'\n\nexport default function tfhd(data) {\n  const {trackId} = data\n  // prettier-ignore\n  return generateBox('tfhd', new Uint8Array([\n    ...generateVersionAndFlags(0, 0), // version & flags\n    ...num2FourBytes(trackId),\n  ]))\n}\n","import {concatTypedArray, generateBox} from '../utils'\n\nexport default function sdtp(data) {\n  const {samples} = data\n  const content = concatTypedArray(\n    [0x00, 0x00, 0x00, 0x00],\n    ...samples.map(() => new Uint8Array([0x10])) // FIXME: need sample flags\n  )\n  return generateBox('sdtp', content)\n}\n","import {generateBox, generateVersionAndFlags} from '../utils'\n\nexport default function tfdt(data) {\n  const {baseMediaDecodeTime} = data\n  // prettier-ignore\n  const content = new Uint8Array([\n    ...generateVersionAndFlags(1, 0), //  version & flag\n    0x00, 0x00, 0x00, 0x00,\n    (baseMediaDecodeTime >>> 24) & 0xFF,  // baseMediaDecodeTime: int32\n    (baseMediaDecodeTime >>> 16) & 0xFF,\n    (baseMediaDecodeTime >>>  8) & 0xFF,\n    (baseMediaDecodeTime) & 0xFF\n  ])\n  return generateBox('tfdt', content)\n}\n","import {num2FourBytes, concatTypedArray, generateBox} from '../utils'\n\nexport default function trun(data) {\n  const {samples, trackId} = data\n  const ceil = trackId === 1 ? 16 : 12\n  const length = samples.length\n  // mdat-header 8\n  // moof-header 8\n  // mfhd 16\n  // traf-header 8\n  // thhd 16\n  // tfdt 20\n  // trun-header 12\n  // sampleCount 4\n  // data-offset 4\n  // samples.length\n  // sdtp-header 12\n  const offset = 108 + ceil * length + samples.length\n  // prettier-ignore\n  const content = new Uint8Array([\n    0x00, 0x00, trackId === 1 ? 0x0f : 0x07, 0x01,\n    ...num2FourBytes(samples.length),\n    ...num2FourBytes(offset),\n    ...concatTypedArray(\n      ...samples.map((sample, index) => {\n        const {duration, size, compositionTimeOffset} = sample\n        return concatTypedArray(\n          num2FourBytes(duration),\n          num2FourBytes(size),\n          trackId === 1\n            ? index === 0 // FIXME:need sample flags\n              ? [0x02, 0x00, 0x00, 0x00]\n              : [0x01, 0x01, 0x00, 0x00]\n            : [0x01, 0x00, 0x00, 0x00],\n          trackId === 1 ? num2FourBytes(compositionTimeOffset): [],\n        )\n      })\n    ),\n  ])\n  return generateBox('trun', content)\n}\n","import {concatTypedArray, generateBox} from '../utils'\nimport tfhd from './tfhd'\nimport sdtp from './sdtp'\nimport tfdt from './tfdt'\nimport trun from './trun'\n\nexport default function traf(data) {\n  const content = concatTypedArray(\n    tfhd(data),\n    tfdt(data),\n    sdtp(data),\n    trun(data)\n  )\n  return generateBox('traf', content)\n}\n","import {concatTypedArray, generateBox} from '../utils'\nimport mfhd from './mfhd'\nimport traf from './traf'\n\nexport default function moof(data) {\n  const content = concatTypedArray(mfhd(data), traf(data))\n  return generateBox('moof', content)\n}\n","import {generateBox} from '../utils'\n\nexport default function mdat(data) {\n  return generateBox('mdat', data)\n}\n","import {concatTypedArray} from './utils'\nimport ftyp from './boxes/ftyp'\nimport moov from './boxes/moov'\nimport moof from './boxes/moof'\nimport mdat from './boxes/mdat'\n\nexport default class FMP4Generator {\n  static sequenceNumber = 1\n\n  static ftyp() {\n    return ftyp()\n  }\n\n  static moov(data, type) {\n    return moov(data, type)\n  }\n\n  static moof(trackInfo, baseMediaDecodeTime) {\n    return moof(\n      Object.assign({}, trackInfo, {\n        sequenceNumber: FMP4Generator.sequenceNumber++,\n        baseMediaDecodeTime,\n      })\n    )\n  }\n\n  static mdat(trackInfo) {\n    const samples = trackInfo.samples.map(\n      sample => new Uint8Array(sample.buffer)\n    )\n\n    return mdat(concatTypedArray(...samples))\n  }\n}\n","// copy from https://github.com/google/shaka-player/blob/master/lib/polyfill/mediasource.js#L125\nfunction abortPolyfill() {\n  const addSourceBuffer = MediaSource.prototype.addSourceBuffer\n  MediaSource.prototype.addSourceBuffer = function(...varArgs) {\n    const sourceBuffer = addSourceBuffer.apply(this, varArgs)\n    sourceBuffer.abort = function() {} // Stub out for buggy implementations.\n    return sourceBuffer\n  }\n}\n\nexport {abortPolyfill}\n","import {ua} from 'griffith-utils'\nimport FragmentFetch from '../fetch'\nimport MP4Parse from '../mp4/mp4Parse'\nimport MP4Probe from '../mp4/mp4Probe'\nimport FMP4 from '../fmp4/fmp4Generator'\nimport {concatTypedArray} from '../fmp4/utils'\nimport {abortPolyfill} from './polyfill'\n\nconst MAGIC_NUMBER = 20000\n\nexport default class MSE {\n  constructor(video, src) {\n    this.video = video\n    this.src = src\n    this.qualityChangeFlag = false\n    this.videoQueue = []\n    this.audioQueue = []\n    this.sourceBuffers = {\n      video: null,\n      audio: null,\n    }\n    this.mimeTypes = {\n      video: 'video/mp4; codecs=\"avc1.42E01E\"',\n      audio: 'audio/mp4; codecs=\"mp4a.40.2\"',\n    }\n    this.installSrc()\n  }\n\n  installSrc = () => {\n    this.mediaSource = new MediaSource()\n    this.mediaSource.addEventListener('sourceopen', this.handleSourceOpen)\n    this.video.src = URL.createObjectURL(this.mediaSource)\n  }\n\n  handleSourceOpen = () => {\n    this.sourceBuffers.video = this.mediaSource.addSourceBuffer(\n      this.mimeTypes.video\n    )\n    this.sourceBuffers.audio = this.mediaSource.addSourceBuffer(\n      this.mimeTypes.audio\n    )\n    this.sourceBuffers.video.addEventListener('updateend', () => {\n      const buffer = this.videoQueue.shift()\n\n      if (buffer && this.mediaSource.readyState === 'open') {\n        this.handleAppendBuffer(buffer, 'video')\n      }\n      if (this.needUpdateTime) {\n        this.needUpdateTime = false\n        this.handleTimeUpdate()\n      }\n    })\n\n    this.sourceBuffers.audio.addEventListener('updateend', () => {\n      const buffer = this.audioQueue.shift()\n\n      if (buffer && this.mediaSource.readyState === 'open') {\n        this.handleAppendBuffer(buffer, 'audio')\n      }\n    })\n  }\n\n  handleAppendBuffer = (buffer, type) => {\n    if (this.mediaSource.readyState === 'open') {\n      try {\n        if (this.sourceBuffers[type]) {\n          this.sourceBuffers[type].appendBuffer(buffer)\n        }\n      } catch (error) {\n        // see https://developers.google.com/web/updates/2017/10/quotaexceedederror\n        if (error.code === 22) {\n          this.handleQuotaExceededError(buffer, type)\n        } else {\n          throw error\n        }\n      }\n    } else {\n      this[`${type}Queue`].push(buffer)\n    }\n  }\n\n  init() {\n    // 获取 mdat 外的数据\n    return this.loadData()\n      .then(res => {\n        return new MP4Parse(new Uint8Array(res)).mp4BoxTreeObject\n      })\n      .then(mp4BoxTreeObject => {\n        // 有可能 moov 在最后一个 box，导致我们第一次请求 0~MAGIC_NUMBER 没有请求到 moov。\n        const {moov, ftyp} = mp4BoxTreeObject\n        if (!moov) {\n          let moovStart = 0\n          for (const box in mp4BoxTreeObject) {\n            moovStart += mp4BoxTreeObject[box].size\n          }\n          return this.loadData(moovStart, '').then(res => {\n            const {moov} = new MP4Parse(new Uint8Array(res)).mp4BoxTreeObject\n            if (moov) {\n              mp4BoxTreeObject.moov = moov\n              return mp4BoxTreeObject\n            }\n          })\n        } else {\n          // 有可能视频较大，第一次请求没有请求到完整的 moov box\n          const ftypAndMoovSize = moov.size + ftyp.size\n          if (ftypAndMoovSize > MAGIC_NUMBER) {\n            return this.loadData(ftyp.size, ftypAndMoovSize).then(res => {\n              const {moov} = new MP4Parse(new Uint8Array(res)).mp4BoxTreeObject\n              if (moov) {\n                mp4BoxTreeObject.moov = moov\n                return mp4BoxTreeObject\n              }\n            })\n          }\n        }\n\n        return mp4BoxTreeObject\n      })\n      .then(mp4BoxTreeObject => {\n        this.mp4Probe = new MP4Probe(mp4BoxTreeObject)\n        this.mp4BoxTreeObject = mp4BoxTreeObject\n\n        const videoRawData = concatTypedArray(\n          FMP4.ftyp(),\n          FMP4.moov(this.mp4Probe.mp4Data, 'video')\n        )\n\n        const audioRawData = concatTypedArray(\n          FMP4.ftyp(),\n          FMP4.moov(this.mp4Probe.mp4Data, 'audio')\n        )\n\n        // 如果是切换清晰度，mediaSource 的 readyState 已经 open 了，可以直接 append 数据。\n        // mediaSource is already open when we switch video quality.\n        if (this.qualityChangeFlag) {\n          this.handleAppendBuffer(videoRawData, 'video')\n          this.handleAppendBuffer(audioRawData, 'audio')\n        } else {\n          this.mediaSource.addEventListener('sourceopen', () => {\n            this.handleAppendBuffer(videoRawData, 'video')\n            this.handleAppendBuffer(audioRawData, 'audio')\n          })\n        }\n      })\n  }\n\n  hasBufferedCache = isSeek => {\n    const {\n      timeRange: [start, end],\n    } = this.mp4Probe\n\n    // handle seek case and normal case\n    const time = isSeek ? this.video.currentTime : Math.floor((start + end) / 2)\n    const buffered = this.video.buffered\n\n    if (buffered && buffered.length > 0) {\n      for (let i = 0; i < buffered.length; i++) {\n        if (time >= buffered.start(i) && time <= buffered.end(i)) {\n          return true\n        }\n      }\n    }\n\n    return false\n  }\n\n  seek = time => {\n    FragmentFetch.clear()\n\n    const [start, end] = this.mp4Probe.getFragmentPosition(time)\n    // 对于已经请求的数据不再重复请求\n    // No need to repeat request video data\n    if (this.hasBufferedCache(time) && !this.qualityChangeFlag) {\n      return\n    }\n\n    this.handleReplayCase()\n\n    this.loadData(start, end).then(mdatBuffer => {\n      if (!mdatBuffer) {\n        return\n      }\n      const {videoTrackInfo, audioTrackInfo} = this.mp4Probe.getTrackInfo(\n        mdatBuffer\n      )\n      const {videoInterval, audioInterval} = this.mp4Probe\n      const videoBaseMediaDecodeTime = videoInterval.timeInterVal[0]\n      const audioBaseMediaDecodeTime = audioInterval.timeInterVal[0]\n      const videoRawData = concatTypedArray(\n        FMP4.moof(videoTrackInfo, videoBaseMediaDecodeTime),\n        FMP4.mdat(videoTrackInfo)\n      )\n\n      // maybe the last GOP dont have audio track\n      // 最后一个 GOP 序列可能没有音频轨\n      if (audioTrackInfo.samples.length !== 0) {\n        const audioRawData = concatTypedArray(\n          FMP4.moof(audioTrackInfo, audioBaseMediaDecodeTime),\n          FMP4.mdat(audioTrackInfo)\n        )\n        this.handleAppendBuffer(audioRawData, 'audio')\n      }\n\n      this.handleAppendBuffer(videoRawData, 'video')\n\n      if (time) {\n        this.needUpdateTime = true\n      }\n\n      this.qualityChangeFlag = false\n    })\n  }\n\n  changeQuality(newSrc) {\n    this.src = newSrc\n    this.qualityChangeFlag = true\n\n    // remove old quality buffer before append new quality buffer\n    for (const key in this.sourceBuffers) {\n      const track = this.sourceBuffers[key]\n      const length = track.buffered.length\n\n      if (length > 0) {\n        this.removeBuffer(\n          track.buffered.start(0),\n          track.buffered.end(length - 1),\n          key\n        )\n      }\n    }\n\n    this.init().then(() => {\n      this.video.currentTime = this.video.currentTime\n    })\n  }\n\n  removeBuffer(start, end, type) {\n    const track = this.sourceBuffers[type]\n    if (track.updating) {\n      const {isSafari} = ua\n\n      if (isSafari) {\n        // Safari 9/10/11/12 does not correctly implement abort() on SourceBuffer.\n        // Calling abort() before appending a segment causes that segment to be\n        // incomplete in buffer.\n        // Bug filed: https://bugs.webkit.org/show_bug.cgi?id=165342\n        abortPolyfill()\n      }\n      track.abort()\n    }\n    track.remove(start, end)\n  }\n\n  loadData(start = 0, end = MAGIC_NUMBER) {\n    return new Promise(resolve => {\n      new FragmentFetch(this.src, start, end, resolve)\n    }).catch(() => {\n      // catch cancel error\n    })\n  }\n\n  handleTimeUpdate = () => {\n    if (!this.mp4Probe) {\n      return\n    }\n    const {\n      videoInterval: {offsetInterVal = []} = [],\n      mp4Data: {videoSamplesLength},\n      timeRange = [],\n    } = this.mp4Probe\n    if (this.mediaSource.readyState !== 'closed') {\n      if (\n        offsetInterVal[1] === videoSamplesLength &&\n        this.video.currentTime > timeRange[0]\n      ) {\n        this.destroy()\n      } else if (this.shouldFetchNextSegment()) {\n        this.seek()\n      }\n    }\n  }\n\n  handleReplayCase = () => {\n    if (this.mediaSource.readyState === 'ended') {\n      // If MediaSource.readyState value is ended,\n      // setting SourceBuffer.timestampOffset will cause this value to transition to open.\n      this.sourceBuffers.video.timestampOffset = 0\n    }\n  }\n\n  shouldFetchNextSegment = () => {\n    this.handleReplayCase()\n    if (this.mp4Probe.isDraining(this.video.currentTime)) {\n      return true\n    }\n    return false\n  }\n\n  destroy = () => {\n    this.mediaSource.removeEventListener('sourceopen', this.handleSourceOpen)\n    URL.revokeObjectURL(this.video.src)\n    if (\n      this.mediaSource.readyState === 'open' &&\n      !this.sourceBuffers.video.updating &&\n      !this.sourceBuffers.audio.updating\n    ) {\n      this.mediaSource.endOfStream()\n    }\n  }\n\n  handleQuotaExceededError = (buffer, type) => {\n    for (const key in this.sourceBuffers) {\n      const track = this.sourceBuffers[key]\n\n      const currentTime = this.video.currentTime\n\n      let removeStart = 0\n\n      if (track.buffered.length > 0) {\n        removeStart = track.buffered.start(0) + 10\n      }\n      this.removeBuffer(removeStart, currentTime - 10, key)\n    }\n\n    // re-append(maybe should lower the playback resolution)\n    this.handleAppendBuffer(buffer, type)\n  }\n}\n","import React, {Component} from 'react'\nimport {ua} from 'griffith-utils'\nimport MSE from './mse'\n\nconst {isSafari} = ua\n\nexport default class Player extends Component {\n  useMSE = true\n\n  componentDidMount() {\n    this.mse = new MSE(this.video, this.props.src)\n    this.mse.init().then(() => {\n      // don't use MSE If the video don't have a video track\n      if (!this.mse.mp4Probe.mp4Data.videoDuration) {\n        this.useMSE = false\n        this.video.src = this.props.src\n      }\n    })\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.src !== prevProps.src && this.useMSE) {\n      this.mse.changeQuality(this.props.src)\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.useMSE) {\n      this.mse.destroy()\n    }\n  }\n\n  handleTimeUpdate = e => {\n    if (this.useMSE) {\n      this.mse.handleTimeUpdate()\n    }\n    this.props.onTimeUpdate(e)\n  }\n\n  handleVideoSeeking = e => {\n    const currentTime = this.video.currentTime\n    const buffered = this.video.buffered\n\n    if (isSafari && buffered && buffered.length > 0) {\n      if (currentTime - 0.1 > buffered.start(0)) {\n        if (this.useMSE) {\n          this.mse.seek(this.video.currentTime)\n        }\n      } else if (currentTime < buffered.start(0)) {\n        this.handleSafariBug()\n        return\n      }\n    } else {\n      if (this.useMSE) {\n        this.mse.seek(this.video.currentTime)\n      }\n    }\n    this.props.onSeeking(e)\n  }\n\n  handlePlay = e => {\n    const {currentTime} = this.video\n    if (currentTime === 0 && this.useMSE) {\n      this.mse.seek(0)\n    }\n\n    const {onPlay} = this.props\n    if (onPlay) {\n      onPlay(e)\n    }\n  }\n\n  handleVideoProgress = e => {\n    const buffered = this.video.buffered\n    const currentTime = this.video.currentTime\n    if (\n      isSafari &&\n      buffered &&\n      buffered.length > 0 &&\n      currentTime < buffered.start(0)\n    ) {\n      this.handleVideoSeeking()\n    }\n    this.props.onProgress(e)\n  }\n\n  // 如果当前时间为 0，safari 浏览器需要把 currentTime 设置成 buffered.start(0) 右边一点点的位置\n  // 否则 MSE 无法正常播放，会卡在 loading 状态。\n  handleSafariBug = () => {\n    let start = 0\n\n    if (this.video.buffered.length > 0) {\n      start = this.video.buffered.start(0)\n    }\n    this.video.currentTime = start + 0.1\n  }\n\n  render() {\n    /* eslint-disable no-unused-vars */\n    const {\n      src,\n      onRef,\n      currentQuality,\n      onSeeking,\n      onPlay,\n      paused,\n      onTimeUpdate,\n      onProgress,\n      ...props\n    } = this.props\n    /* eslint-enable no-unused-vars */\n    return (\n      <video\n        ref={el => {\n          this.video = el\n          onRef(el)\n        }}\n        {...props}\n        onSeeking={this.handleVideoSeeking}\n        onTimeUpdate={this.handleTimeUpdate}\n        onPlay={this.handlePlay}\n        onProgress={this.handleVideoProgress}\n      />\n    )\n  }\n}\n","import VideoComponent from './player'\n\nexport default {\n  pluginName: 'griffith-mp4',\n  VideoComponent,\n  willHandleSrcChange: true,\n}\n"],"names":["FragmentFetch","constructor","url","start","end","callback","queue","filter","item","push","xhr","XMLHttpRequest","open","responseType","setRequestHeader","onload","status","response","remove","send","onerror","onabort","clear","length","shift","abort","Stream","buffer","position","readType","typeBuffer","i","String","fromCharCode","apply","readByte","readOneByte","readTwoByte","readThreeByte","readFourByte","ftyp","stream","majorBrand","minorVersion","compatibleBrands","ftypBox","mvhd","version","flags","creationTime","modificationTime","timescale","duration","rate","volume","matrix","nextTrackID","mvhdBox","tkhd","trackID","layer","alternateGroup","width","Number","height","tkhdBox","elst","entryCount","entries","segmentDuration","mediaTime","mediaRateInteger","mediaRateFraction","elstBox","mdhd","language","field","languageString","mdhdBox","hdlr","handlerType","toString","handlerType2","name","c","hdlrBox","join","vmhd","graphicsmode","opcolor","Array","fill","vmhdBox","dref","urlBox","urlBuffer","slice","newStream","MP4Box","Box","readSize","readBody","box","drefBox","stsd","avc1Buffer","type","stsdBox","avc1","dataReferenceIndex","horizresolution","vertresolution","frameCount","compressorname","depth","avcCBuffer","avcCBox","avc1Box","avcC","configurationVersion","AVCProfileIndication","profileCompatibility","AVCLevelIndication","lengthSizeMinusOne","numOfSequenceParameterSets","SPS","numOfPictureParameterSets","PPS","stts","samples","sampleCount","sampleDelta","sttsBox","stss","sampleNumber","stssBox","ctts","sampleOffset","cttsBox","firstChunk","samplesPerChunk","sampleDescriptionIndex","sampleSize","entrySize","stco","chunkOffset","stcoBox","smhd","data","smhdBox","mp4a","channelCount","sampleRate","esdsBuffer","esdsBox","mp4aBox","esds","TAGS","getESDescrTag","size","ESID","streamPriority","getDecoderConfigDescrTag","getDecSpecificDescrTag","objectTypeIndication","streamType","upStream","bufferSize","maxBitrate","avgBitrate","dataSize","EScode","padStart","audioConfig","map","meta","metaBox","mdat","subarray","mdatBox","sdtp","samplesFlag","tmpByte","isLeading","dependsOn","isDepended","hasRedundancy","sdtpBox","thmb","thmbBox","stsc","stsz","CONTAINER_BOXES","SPECIAL_BOXES","find","parserContainerBox","boxParse","mdia","videoTrak","audioTrak","MP4Parse","mp4BoxTreeObject","init","parse","findBox","mp4BoxTree","findMoovBox","findMvhdBox","findVideoTrakBox","findAudioTrakBox","findVideoTkhdBox","findAudioTkhdBox","findVideoStblBox","findAudioStblBox","findVideoStscBox","findAudioStscBox","findAvcCBox","findEsdsBox","findVideoStcoBox","findAudioStcoBox","findVideoSttsBox","findAudioSttsBox","findAudioMdhdBox","findVideoMdhdBox","findVideoStssBox","findVideoStszBox","findVideoCttsBox","findAudioStszBox","findMp4aBox","findAudioElstBox","findVideoElstBox","getSamplesOffset","stszBox","stscBoxSamplesPerChunkArray","samplesOffset","j","flag","offset","getPerChunkArray","stscBox","stscSamplesLength","getFragmentPosition","videoSamples","audioSamples","mdatStart","isLastFragmentPosition","videoSamplesEnd","videoSamplesStart","audioSamplesEnd","audioSamplesStart","MAX_SAFE_INTEGER","fragmentEndPosition","Math","max","fragmentStartPosition","min","getBufferStart","videoOffsetStart","audioOffsetStart","getChunkSize","offsetStart","cloneDeep","newOffsetStart","chunkIndex","sampleInterval","getVideoSamples","bufferStart","offsetInterVal","compositionTimeOffset","getSamples","getAudioSamples","offsetEnd","sttsFormatBox","chunkOffsetArray","sample","idx","getDuration","totalCount","count","getVideoSamplesInterval","time","intervalArray","getIntervalArray","timeInterval","interval","timeInterVal","undefined","getAudioSamplesInterval","videoInterval","startTime","endTime","audioTimescale","videoTimescale","videoStszBox","audioStszBox","audioElstBox","audioStartTime","audioEndTime","startDuration","endDuration","audioEnd","getNextVideoSamplesInterval","result","floor","getVideoTrackInfo","mdatBuffer","trackId","getAudioTrackInfo","MP4Probe","mp4Data","audioInterval","videoTimeRange","audioTimeRange","timeRange","updateInterval","videoTrackInfo","audioTrackInfo","getMP4Data","audioDuration","ESDescrTag","DecSpecificDescrTag","hasVideoStream","videoDuration","videoSamplesLength","generateVersionAndFlags","Uint8Array","concatTypedArray","arrays","totalLength","arr","set","num2FourBytes","num","num2EightBytes","upper","pow","lower","char2Hex","char","charCodeAt","str2TypedArray","str","prototype","call","generateBox","content","generatePredefined","generateZeroBytes","generateReserved","bytes","MATRIX_TYPED_ARRAY","handler","dinf","acv1","config","stbl","minf","header","trak","mvex","mehd","trex","moov","mfhd","sequenceNumber","tfhd","tfdt","baseMediaDecodeTime","trun","ceil","index","traf","moof","FMP4Generator","trackInfo","Object","assign","abortPolyfill","addSourceBuffer","MediaSource","varArgs","sourceBuffer","MAGIC_NUMBER","MSE","video","src","mediaSource","addEventListener","handleSourceOpen","URL","createObjectURL","sourceBuffers","mimeTypes","audio","videoQueue","readyState","handleAppendBuffer","needUpdateTime","handleTimeUpdate","audioQueue","appendBuffer","error","code","handleQuotaExceededError","isSeek","mp4Probe","currentTime","buffered","hasBufferedCache","qualityChangeFlag","handleReplayCase","loadData","then","getTrackInfo","videoBaseMediaDecodeTime","audioBaseMediaDecodeTime","videoRawData","FMP4","audioRawData","destroy","shouldFetchNextSegment","seek","timestampOffset","isDraining","removeEventListener","revokeObjectURL","updating","endOfStream","key","track","removeStart","removeBuffer","installSrc","res","moovStart","ftypAndMoovSize","changeQuality","newSrc","isSafari","ua","Promise","resolve","catch","Player","Component","e","useMSE","mse","props","onTimeUpdate","handleSafariBug","onSeeking","onPlay","handleVideoSeeking","onProgress","componentDidMount","componentDidUpdate","prevProps","componentWillUnmount","render","onRef","currentQuality","paused","el","handlePlay","handleVideoProgress","pluginName","VideoComponent","willHandleSrcChange"],"mappings":"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"}